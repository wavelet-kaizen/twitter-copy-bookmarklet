javascript:!function(){const e={trim_blank_line:128,avoid_ng_level:3,removeEmoji:!1,ngurl:[/(https?:\/\/note\.mu\/?[^\s]*)/g,/(https?:\/\/.*amazon\.co[^\s]*)/g,/(https?:\/\/.*amazon\.jp\/?[^\s]*)/g,/(https?:\/\/seed\.online\/?[^\s]*)/g,/(https?:\/\/.*hatenablog\.com\/?[^\s]*)/g,/(https?:\/\/bit\.ly\/?[^\s]*)/g,/(https?:\/\/pr5\.work\/?[^\s]*)/g,/(https?:\/\/ow\.ly\/?[^\s]*)/g,/(https?:\/\/buff\.ly\/?[^\s]*)/g,/(https?:\/\/.+\.shop\/?[^\s]*)/g,/(https?:\/\/ur0\.link\/?[^\s]*)/g,/(https?:\/\/goo\.gl\/?[^\s]*)/g,/(https?:\/\/discord\.gg\/?[^\s]*)/g,/(https?:\/\/t\.co\/?[^\s]*)/g,/(https?:\/\/lineblog\.me\/?[^\s]*)/g,/(https?:\/\/db\.tt\/?[^\s]*)/g,/(https?:\/\/.*getuploader\.com\/?[^\s]*)/g,/(https?:\/\/.*r10\.to\/?[^\s]*)/g,/(https?:\/\/mjk\.ac\/?[^\s]*)/g,/(https?:\/\/kisu\.me\/?[^\s]*)/g,/(https?:\/\/j55\.pw\/?[^\s]*)/g,/(https?:\/\/j\.mp\/?[^\s]*)/g,/(https?:\/\/www\d?\.to\/?[^\s]*)/g,/(https?:\/\/ux\.nu\/?[^\s]*)/g,/(https?:\/\/urx\d?\.nu\/?[^\s]*)/g,/(https?:\/\/p\.tl\/?[^\s]*)/g,/(https?:\/\/amba\.to\/?[^\s]*)/g,/(https?:\/\/amzn\.to\/?[^\s]*)/g,/(https?:\/\/appsto\.re\/?[^\s]*)/g,/(https?:\/\/dlvr\.it\/?[^\s]*)/g,/(https?:\/\/kuku\.lu\/?[^\s]*)/g,/(https?:\/\/linkclub\.jp\/?[^\s]*)/g,/(https?:\/\/.*sakura.ne.jp\/?[^\s]*)/g,/(https?:\/\/.*wixsite.com\/?[^\s]*)/g,/(https?:\/\/lineblog\.me\/?[^\s]*)/g,/(https?:\/\/kakuyomu\.jp\/?[^\s]*)/g,/(https?:\/\/.*syosetu\.com\/?[^\s]*)/g,/(https?:\/\/.*stores\.jp\/?[^\s]*)/g,/(https?:\/\/.*shop-pro\.jp\/?[^\s]*)/g,/(https?:\/\/.*webmoney\.jp\/?[^\s]*)/g,/(https?:\/\/.*\.live\.nicovideo\.jp\/?[^\s]*)/g,/(https?:\/\/.*linkco\.re\/?[^\s]*)/g,/(https?:\/\/.*lin\.ee\/?[^\s]*)/g,/(https?:\/\/.*onl\.tw\/?[^\s]*)/g,/(https?:\/\/.*onl\.la\/?[^\s]*)/g,/(https?:\/\/.*onl\.bz\/?[^\s]*)/g,/(https?:\/\/.*onl\.sc\/?[^\s]*)/g,/(https?:\/\/.*tinyurl\.com\/?[^\s]*)/g,/(https?:\/\/.*openrec\.tv\/?[^\s]*)/g,/(https?:\/\/.*cloudfront\.net\/?[^\s]*)/g,/(https?:\/\/.*fc2\.com\/?[^\s]*)/g,/(https?:\/\/is\.gd\/?[^\s]*)/g,/(https?:\/\/.*\/\?id=\d+[^\s]*)/g,/(https?:\/\/yt\.be\/?[^\s]*)/g,/(https?:\/\/.*twitch\.tv\/?[^\s]*)/g,/(https?:\/\/.*campaign[^\s]*)/g,/(https?:\/\/.*tiktok\.com\/?[^\s]*)/g,/(https?:\/\/.*nicovideo\.jp\/?[^\s]*)/g,/(https?:\/\/.*discord\.com\/?[^\s]*)/g],ngword:[{before:/拡散希望/g,after:"拡/散/希/望"},{before:/拡散お願い/g,after:"拡/散/お/願/い"},{before:/(https?:\/\/marshmallow-qa\.com\/?[^?]+)\?[^\s]+/g,after:"$1"},{before:/(utm_)(source|medium|term|campaign|content)/g,after:"$1.$2"},{before:/鈴原/g,after:"鈴.原"},{before:/無料/g,after:"無.料"},{before:/\.{3}/g,after:"…"},{before:/(_ ?){2,}/g,after:"_"},{before:/(- ?){2,}/g,after:"-"},{before:/(= ?){2,}/g,after:"="},{before:/(; ?){3,}/g,after:";;"},{before:/(: ?){3,}/g,after:"::"},{before:/&lt;/g,after:"<"},{before:/&gt;/g,after:">"},{before:/&amp;/g,after:"&"},{before:/&quot;/g,after:'"'},{before:/ +/g,after:" "},{before:/　+/g,after:"　"},{before:/　+/g,after:"　"},{before:/(\d{2,})(円)/g,after:"$1.$2"},{before:/登録/g,after:"登.録"},{before:/(く.{1,2}[ぽポ])([んン])/g,after:"$1.$2"},{before:/キャンペーン/g,after:"キャン.ペーン"},{before:/コード/g,after:"コー.ド"},{before:/K5/g,after:"K.5"},{before:/常闇/g,after:"とこやみ"},{before:/tokoyami/g,after:"toko.yami"}],replaceURLString:[/K5/g,/tokoyami/g],ngQueryParam:[/utm_(source|medium|term|campaign|content)/],ngdomain:["amazon","amzn",/\.{3}/,/_{4,}/,/-{4,}/],removeSurrogate:[65039,8419],unicodeOffset:[[/[\u{2776}-\u{277F}]/gu,10053],[/\u{24FF}/gu,9423],[/[\u{24EB}-\u{24F4}]/gu,129],[/[\u{1f150}-\u{1f169}]/gu,127247],[/[\u{24B6}-\u{24CF}]/gu,9333],[/[\u{24D0}-\u{24E9}]/gu,9327],[/[\u{1d400}-\u{1d419}]/gu,119743],[/[\u{1d41a}-\u{1d433}]/gu,119737],[/[\u{1d7ce}-\u{1d7d7}]/gu,120734],[/[\u{1d56c}-\u{1d585}]/gu,120107],[/[\u{1d586}-\u{1d59f}]/gu,120101],[/[\u{1d468}-\u{1d481}]/gu,119847],[/[\u{1d482}-\u{1d49b}]/gu,119841],[/[\u{1d4d0}-\u{1d4e9}]/gu,119951],[/[\u{1d4ea}-\u{1d503}]/gu,119945],[/[\u{2124}]/gu,8394],[/[\u{1d552}-\u{1d56b}]/gu,120049],[/[\u{1d7d8}-\u{1d7e1}]/gu,120744],[/[\u{1d670}-\u{1d689}]/gu,120367],[/[\u{1d68a}-\u{1d6a3}]/gu,120361],[/[\u{1d7f6}-\u{1d7ff}]/gu,120774],[/[\u{1d5a0}-\u{1d5b9}]/gu,120159],[/[\u{1d5ba}-\u{1d5d3}]/gu,120153],[/[\u{1d7e2}-\u{1d7eb}]/gu,120754],[/[\u{1d5d4}-\u{1d5ed}]/gu,120211],[/[\u{1d5ee}-\u{1d607}]/gu,120205],[/[\u{1d7ec}-\u{1d7f5}]/gu,120764],[/[\u{1d63c}-\u{1d655}]/gu,120315],[/[\u{1d656}-\u{1d66f}]/gu,120309],[/[\u{1d608}-\u{1d621}]/gu,120263],[/[\u{1d622}-\u{1d63b}]/gu,120257],[/[\u{249c}-\u{24b5}]/gu,9275],[/[\u{2474}-\u{247c}]/gu,9283],[/[\u{1f1e6}-\u{1f1ff}]/gu,127397],[/[\u{1f130}-\u{1f149}]/gu,127215],[/[\u{1f170}-\u{1f189}]/gu,127279],[/[\u{1d538}-\u{1d550}]/gu,120055],[/[\u{2102}]/gu,8383],[/[\u{210d}]/gu,8389],[/[\u{2115}]/gu,8391],[/[\u{2119}-\u{211a}]/gu,8393],[/[\u{211d}]/gu,8395],[/[\u{2124}]/gu,8394],[/[\u{1d434}-\u{1d44d}]/gu,119795],[/[\u{1d44e}-\u{1d467}]/gu,119789],[/[\u{1d49c}-\u{1d4b5}]/gu,119899],[/[\u{1d4b6}-\u{1d4cf}]/gu,119893],[/[\u{1d504}-\u{1d51c}]/gu,120003],[/[\u{1d51e}-\u{1d537}]/gu,119997]],replaceEmoji:[{before:/\u{203c}/gu,after:"!!"},{before:/\u{2049}/gu,after:"!?"},{before:/\u{1f195}/gu,after:"[NEW]"},{before:/\u{1f202}/gu,after:"サ"},{before:/\u{1f522}/gu,after:"1234"},{before:/\u{1f197}/gu,after:"[OK]"},{before:/\u{1f196}/gu,after:"[NG]"},{before:/\u{1f193}/gu,after:"[FREE]"},{before:/\u{1f192}/gu,after:"[COOL]"},{before:/\u{1f199}/gu,after:"[UP!]"},{before:/\u{1f201}/gu,after:"ｺｺ"},{before:/\u{1f233}/gu,after:"空"},{before:/\u{1f17f}/gu,after:"Ｐ"},{before:/\u{1f251}/gu,after:"可"},{before:/\u{1f250}/gu,after:"得"},{before:/\u{3299}/gu,after:"秘"},{before:/\u{3297}/gu,after:"祝"},{before:/\u{1f234}/gu,after:"合"},{before:/\u{1f235}/gu,after:"満"},{before:/\u{1f239}/gu,after:"割"},{before:/\u{1f232}/gu,after:"禁"},{before:/\u{1f170}/gu,after:"A"},{before:/\u{1f171}/gu,after:"B"},{before:/\u{1f18e}/gu,after:"AB"},{before:/\u{1f191}/gu,after:"CL"},{before:/\u{1f17e}/gu,after:"O"},{before:/\u{1f198}/gu,after:"[SOS]"},{before:/\u{2b55}/gu,after:"○"},{before:/\u{274c}/gu,after:"×"},{before:/\u{2757}/gu,after:"!"},{before:/\u{2755}/gu,after:"!"},{before:/\u{2753}/gu,after:"?"},{before:/\u{2754}/gu,after:"?"},{before:/\u{26a0}/gu,after:"!"},{before:/\u{1f22f}/gu,after:"指"},{before:/\u{1f19a}/gu,after:"VS"},{before:/\u{1f194}/gu,after:"ID"},{before:/\u{1f51f}/gu,after:"10"},{before:/\u{1f236}/gu,after:"有"},{before:/\u{1f21a}/gu,after:"無"},{before:/\u{1f238}/gu,after:"申"},{before:/\u{1f23a}/gu,after:"営"},{before:/\u{1f237}/gu,after:"月"},{before:/\u{a9}/gu,after:"(C)"},{before:/\u{ae}/gu,after:"(R)"},{before:/\u{2122}/gu,after:"(TM)"},{before:/[\u{25b6}\u{25B7}]/gu,after:">"},{before:/[\u{25C0}\u{25C1}]/gu,after:"<"},{before:/[\u{2798}-\u{27af}\u{27B1}-\u{27BE}\u{21E8}]/gu,after:"→"},{before:/[\u{2B05}\u{2B30}-\u{2B42}\u{21E6}]/gu,after:"←"},{before:/[\u{2B06}\u{21E7}]/gu,after:"↑"},{before:/[\u{2B07}\u{21E9}]/gu,after:"↓"},{before:/[\u{1f53c}\u{1F53A}]/gu,after:"▲"},{before:/[\u{1F53B}\u{1F53D}]/gu,after:"▼"},{before:/\u{2139}/gu,after:"i"},{before:/[\u{1F3B5}\u{1F3B6}\u{2669}]/gu,after:"♪"},{before:/\u{2795}/gu,after:"＋"},{before:/\u{2796}/gu,after:"－"},{before:/\u{2797}/gu,after:"÷"},{before:/\u{2716}/gu,after:"×"},{before:/\u{1F4B2}/gu,after:"$"},{before:/\u{146D}/gu,after:"P"},{before:/\u{157C}/gu,after:"H"},{before:/\u{1587}/gu,after:"R"},{before:/\u{15E9}/gu,after:"A"},{before:/\u{15EA}/gu,after:"D"},{before:/\u{15F0}/gu,after:"M"},{before:/\u{15F7}/gu,after:"B"},{before:/\u{2022}/gu,after:"・"},{before:/\u{301C}/gu,after:"～"},{before:/\u{2751}/gu,after:"□"},{before:/\u{795C}/gu,after:"示古"}],emojiRegExpSub:/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|[\u3004\u3016-\u301C\u301E\u3020-\u303F]|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|[\u0081-\u009F\u00A1-\u00A4\u00A6\u00A9-\u00AF\u00B2\u00B3\u00B5\u00B7-\u00D6\u00D8-\u00F6\u00F8-\u00FF]|[\u2000-\u200F\u2011-\u2014\u2016\u2017\u201A\u201B\u201E\u201F\u2022-\u2024\u2027-\u202F\u2031\u2034-\u203A\u203C\u203D\u203F-\u206F]|[\u2070-\u20CF]|[\u2201\u2204-\u2206\u2209\u220A\u220C-\u2210\u2213-\u2219\u221B\u221C\u2221-\u2224\u2226\u222D\u222F-\u2233\u2236-\u223C\u223E-\u2251\u2253-\u225F\u2262-\u2265\u2268\u2269\u226C-\u2281\u2284\u2285\u2288-\u22A4\u22A6-\u22BE\u22C0-\u22FF]|[\u2440-\u245F]|[\u2474-\u24FF]|[\u2504-\u250B\u250D\u250E\u2511\u2512\u2515\u2516\u2519\u251A\u251E\u251F\u2521\u2522\u2526\u2527\u2529\u252A\u252D\u252E\u2531\u2532\u2535\u2536\u2539\u253A\u253D\u253E\u2540\u2541\u2543-\u254A\u254C-\u257F]|[\u25A2-\u25B1\u25B4-\u25BB\u25BE-\u25C5\u25C8-\u25CA\u25CC\u25CD\u25D0-\u25EE\u25F0-\u25FF]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u2604\u2607-\u263F\u2641\u2643-\u2669\u266B-\u266C\u266E\u2670-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2194-\u21D1\u21D3\u21D5-\u21FF]|[\u2FF0-\u2FFF]|[\uA640-\uA69F]|[\u0100-\u0390]|[\u03CA-\u0400]|[\u0452-\u1FFF]|[\uFE70-\uFEFF]|[\uA000-\uE3FF]|[\uFB00-\uFEFF])/g,spaceState:{Ended:"終了済",TimedOut:"終了済",Running:"ライブ中",NotStarted:"開始待ち"}};class i{constructor(e,t,r,a){let u,s,o,n,d,l=((e,t)=>{const i=e.find((e=>"TimelineAddEntries"===e.type&&e.entries));return i?.entries.find((e=>e.entryId.includes(t)))})(e.data.threaded_conversation_with_injections_v2.instructions,t);d=a?l.content.itemContent.tweet_results.result.quoted_status_result.result.tweet?l.content.itemContent.tweet_results.result.quoted_status_result.result.tweet:l.content.itemContent.tweet_results.result.quoted_status_result.result:l.content.itemContent.tweet_results.result.tweet?l.content.itemContent.tweet_results.result.tweet:l.content.itemContent.tweet_results.result,u=d.legacy,s=d.core.user_results.result.legacy,o=d.card?d.card.legacy:void 0,n=d.note_tweet?d.note_tweet.note_tweet_results.result.text:void 0,this.feed=e,this.tweetid=u.id_str,this.twitter=r,this.tweet=u,this.user=s,this.username=this.removeEmoji(s.name),this.screen_name=s.screen_name,this.created_at=new Date(u.created_at),this.isChild=a;let c=this.removeEmoji(n||(u.full_text&&u.full_text.substring(...i.gettextrange(u.full_text,u.display_text_range[0],u.display_text_range[1]))||""));if(this.body=c,o){let e=e=>{let t=o.binding_values.filter((t=>{if(t.key===e)return t}));return t.length>0?t[0].value:void 0},t=e("title");if(t){let i=this.removeEmoji(t.string_value),r=i.split(/( ?- ?)|( ?｜ ?)|( ?\| ?)|( ?: ?)|( ?│ ?)/);if(!(this.body.indexOf(i)>=0||r.length>=2&&this.body.indexOf(r[0])>=0)){let t=e("card_url").string_value;this.body=this.body.replace(t,this.removeEmoji(i)+"\n"+t)}}let i=o.name.match(/poll(\d)choice_text_only/);if(i){this.is_enq_end=e("counts_are_final").boolean_value,this.enq_enddate=new Date(e("end_datetime_utc").string_value),e("last_updated_datetime_utc")&&(this.enq_lastupdate=new Date(e("last_updated_datetime_utc").string_value)),this.enq=[];let t=i[1];for(let i=1;i<=t;i++)this.enq.push({name:e("choice"+i+"_label").string_value,amount:parseInt(e("choice"+i+"_count").string_value)})}if(e("player_stream_url")&&/.*\.vmap$/.test(e("player_stream_url").string_value)&&(this.twitter.promises.push(this.getURLFromVMAP(e("player_stream_url").string_value)),this.imgs=this.imgs||[],this.imgs.push(e("cover_player_image_large").image_value.url)),o.name.indexOf("audiospace")>=0&&(this.audioSpaceId=e("id").string_value,this.twitter.promises.push(this.getSpace(r,this.audioSpaceId))),e("photo_image_full_size_original")||e("thumbnail_image_original")){let t=e("photo_image_full_size_original")||e("thumbnail_image_original");t=t.image_value.url.match(/card_img\/(\d+)\/([^?]*).*format=(\w+)/),this.imgs=this.img||[],this.imgs.push("https://ohayua.cyou/card_img/"+t[1]+"/"+t[2]+"."+t[3])}if(e("unified_card")&&e("unified_card").string_value){let t=JSON.parse(e("unified_card").string_value);if(t.destination_objects&&t.destination_objects.browser_1&&t.destination_objects.browser_1.data&&t.destination_objects.browser_1.data.url_data&&(this.videourl=this.videourl||[],this.videourl.push(this.avoidVideoURLNG(this.avoidLinkURLNG(t.destination_objects.browser_1.data.url_data.url)))),t.media_entities){Object.keys(t.media_entities).map((e=>{if(["video","photo"].indexOf(t.media_entities[e].type)>=0)return t.media_entities[e]})).filter((e=>e)).forEach((e=>{switch(e.type){case"animated_gif":case"video":let t=e.video_info.variants.filter((e=>"video/mp4"===e.content_type)).map((e=>e.bitrate)).sort(),i=e.media_url_https?" "+e.media_url_https:"";this.videourl=this.videourl||[];let r=e.video_info.variants.filter((e=>e.bitrate===t[0]?e:null))[0].url.replace(/\?tag=\w*/,"");this.videourl.push(decodeURIComponent(r+i));break;case"photo":[".png",".jpg",".gif"].some((t=>e.media_url_https.endsWith(t)))&&(this.imgs=this.imgs||[],this.imgs.push(e.media_url_https),e.url&&e.url.length>=0&&this.body.indexOf(e.url)<0&&(this.body=this.body.replace(e.url,e.media_url_https)))}}))}}}if(u.entities&&u.entities.urls&&u.entities.urls.forEach((e=>{this.body=this.body.replace(e.url,this.avoidLinkURLNG(e.expanded_url))})),d.note_tweet&&d.note_tweet.note_tweet_results.result.entity_set&&d.note_tweet.note_tweet_results.result.entity_set.urls&&d.note_tweet.note_tweet_results.result.entity_set.urls.forEach((e=>{this.body=this.body.replace(e.url,this.avoidLinkURLNG(e.expanded_url))})),u.in_reply_to_screen_name&&(this.replyTo=this.replyTo||[],this.replyTo.push("@"+u.in_reply_to_screen_name)),u.entities&&u.entities.user_mentions&&u.entities.user_mentions.forEach((e=>{this.replyTo=this.replyTo||[];let t="@"+e.screen_name;this.replyTo.indexOf(t)<0&&this.replyTo.push(t)})),u.extended_entities&&u.extended_entities.media.map((e=>{switch(e.type){case"animated_gif":case"video":let t=e.video_info.variants.filter((e=>"video/mp4"===e.content_type)).map((e=>e.bitrate)).sort(),i=e.media_url_https?" "+e.media_url_https:"";this.videourl=this.videourl||[];let r=e.video_info.variants.filter((e=>e.bitrate===t[0]?e:null))[0].url.replace(/\?tag=\w*/,"")+i;if(this.videourl.push(r),this.body=this.body.replace(e.url,r),e.additional_media_info&&e.additional_media_info.call_to_actions){let t="";e.additional_media_info.call_to_actions.watch_now?t=e.additional_media_info.call_to_actions.watch_now.url:e.additional_media_info.call_to_actions.visit_site&&(t=e.additional_media_info.call_to_actions.visit_site.url),this.additional_media={url:t,title:e.additional_media_info.title+(e.additional_media_info.description?" ("+e.additional_media_info.description+")":"")}}break;case"photo":let a=e.ext_alt_text?e.ext_alt_text+" ":"";this.imgs=this.imgs||[],this.imgs.push(a+e.media_url_https),this.body=this.body.replace(e.url,a+e.media_url_https)}})),u.conversation_control&&u.conversation_control.policy&&(this.policy=u.conversation_control.policy),u.quoted_status_permalink&&!a)try{this.child=new i(e,t,r,!0),this.body=this.body.replace(u.quoted_status_permalink.expanded,"")}catch(e){console.log(e)}}toString(){let t="";switch(t+=this.replaceNGWord(this.username+" @"+this.screen_name)+" ("+this.getDate(this.created_at)+") ",this.policy){case"community":t+="[返信:フォロー/@のみ]";break;case"by_invitation":t+="[返信:@のみ]"}if(t+="\n",this.replyTo){let e=this.replyTo.filter((e=>this.body.toUpperCase().indexOf(e.toUpperCase())<0?e:null));e.length>0&&(t+=e.join(" ")+" ")}if(t+=this.body?this.avoidVideoURLNG(this.replaceNGWord(this.body))+"\n":"",this.enq){let e=this.enq.reduce(((e,t)=>({amount:e.amount+t.amount}))).amount,i=1;t+="【投票"+(this.is_enq_end?"結果":"中")+":"+this.getenqRemainTime(),t+="("+(this.is_enq_end?"計":"現在")+e.toLocaleString()+"票)】\n",t+=this.enq.map((t=>"["+i+++"] "+t.name+"("+(e>0?Math.round(t.amount/e*100*10)/10:0)+"%)\n")).join("")}if(this.space){let i="",r="";this.space.started_at?i+=" "+this.getDate(this.space.started_at)+" ～":this.space.scheduled_start&&(i+=" "+this.getDate(this.space.scheduled_start)+" 開始予定"),["Ended","TimedOut"].indexOf(this.space.state)>=0&&(r+=" "+this.getDate(this.space.updated_at)),t+=(this.space.title?this.removeEmoji(this.space.title)+" ":"")+"["+e.spaceState[this.space.state]+i+(r||"")+"]",t+="\nホスト："+Array.from(new Set(this.space.admins.map((e=>this.removeEmoji(e.display_name)+" @"+e.twitter_screen_name)))).join(", "),this.space.speakers.length>0&&(t+="\nスピーカー："+Array.from(new Set(this.space.speakers.map((e=>this.removeEmoji(e.display_name)+" @"+e.twitter_screen_name)))).join(", ")),t+="\n"}return t+=this.additional_media&&t.indexOf(this.avoidVideoURLNG(this.additional_media.url))<0?this.additional_media.title+"\n"+this.avoidVideoURLNG(this.additional_media.url)+"\n":"",t+=this.imgs?this.imgs.map((e=>this.body.indexOf(e)<0?this.avoidImageURLNG(e)+"\n":"")).join(""):"",this.videourl&&this.videourl.forEach((e=>{this.body.indexOf(e)<0&&t.indexOf(this.avoidVideoURLNG(e)<0)&&(t+=this.avoidVideoURLNG(e)+"\n")})),t+=this.getURL(),this.child&&(t+="\n\n[引用元] "+this.child.toString()),t.split("\n").length>parseInt(e.trim_blank_line)&&(t=t.replace(/^\s*\n/gm,"")),console.log(this),console.log(t),t}async getURLFromVMAP(e){await fetch(e).then((e=>e.text().then((e=>{let t=(new DOMParser).parseFromString(e,"text/xml"),i=Array.from(t.getElementsByTagName("tw:videoVariant")).filter((e=>"video/mp4"===e.getAttribute("content_type"))),r=i.map((e=>e.getAttribute("bit_rate"))).sort(),a=i.filter((e=>e.getAttribute("bit_rate")===r[0]))[0].getAttribute("url");this.videourl=this.videourl||[],this.videourl.push(decodeURIComponent(a))}))))}async getSpace(e,i){let r="https://"+(this.twitter.isMobile?"mobile.":"")+this.twitter.domain+"/i/api/graphql/"+e.audioSpaceQueryId+"/AudioSpaceById?variables="+encodeURIComponent('{"id":"'+i+'","isMetatagsQuery":false,"withReplays":true,"withListeners":true}')+"&features="+encodeURIComponent('{"spaces_2022_h2_spaces_communities":true,"spaces_2022_h2_clipping":true,"creator_subscriptions_tweet_preview_api_enabled":true,"rweb_tipjar_consumption_enabled":true,"responsive_web_graphql_exclude_directive_enabled":true,"verified_phone_label_enabled":false,"communities_web_enable_tweet_community_results_fetch":true,"c9s_tweet_anatomy_moderator_badge_enabled":true,"articles_preview_enabled":true,"responsive_web_graphql_skip_user_profile_image_extensions_enabled":false,"tweetypie_unmention_optimization_enabled":true,"responsive_web_edit_tweet_api_enabled":true,"graphql_is_translatable_rweb_tweet_is_translatable_enabled":true,"view_counts_everywhere_api_enabled":true,"longform_notetweets_consumption_enabled":true,"responsive_web_twitter_article_tweet_consumption_enabled":true,"tweet_awards_web_tipping_enabled":false,"creator_subscriptions_quote_tweet_preview_enabled":false,"freedom_of_speech_not_reach_fetch_enabled":true,"standardized_nudges_misinfo":true,"tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled":true,"tweet_with_visibility_results_prefer_gql_media_interstitial_enabled":true,"rweb_video_timestamps_enabled":true,"longform_notetweets_rich_text_read_enabled":true,"longform_notetweets_inline_media_enabled":true,"responsive_web_graphql_timeline_navigation_enabled":true,"responsive_web_enhance_cards_enabled":false}'),a={accept:"*/*","accept-language":"ja",authorization:e.authtoken,"content-type":"application/json","sec-ch-ua":'"Google Chrome";v="89", "Chromium";v="89", ";Not A Brand";v="99"',"sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-csrf-token":e.csfrtoken,"x-twitter-active-user":"yes","x-twitter-client-language":"ja"};t.twid?a["x-twitter-auth-type"]="OAuth2Session":a["x-guest-token"]=t.guesttoken,await fetch(r,{headers:a,referrer:this.getURL(),referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"}).then((e=>{if(!e.ok)throw new Error(`Server responded with ${e.status}`);return e.json()})).then((e=>(this.spaceObj=e,this.space={admins:e.data.audioSpace.participants.admins,speakers:e.data.audioSpace.participants.speakers,title:e.data.audioSpace.metadata.title,state:e.data.audioSpace.metadata.state,started_at:e.data.audioSpace.metadata.started_at?new Date(e.data.audioSpace.metadata.started_at):null,scheduled_start:e.data.audioSpace.metadata.scheduled_start?new Date(e.data.audioSpace.metadata.scheduled_start):null,updated_at:e.data.audioSpace.metadata.updated_at?new Date(e.data.audioSpace.metadata.updated_at):null},e))).catch((e=>(console.log(e),null)))}getenqRemainTime(){if(this.is_enq_end)return"";let e=Math.trunc((this.enq_enddate.getTime()-(new Date).getTime())/1e3),t=Math.trunc(e/60/60/24);if(t>0)return"残り"+t+"日";e-=60*t*60*24;let i=Math.trunc(e/60/60);if(i>0)return"残り"+i+"時間";e-=60*i*60;let r=Math.trunc(e/60);return r>0?"残り"+r+"分":(e-=60*r,e>0?"残り"+e+"秒":"")}getURL(){let t="https://twitter.com/"+this.screen_name+"/status/"+this.tweetid;return t=this.replaceText(t,e.replaceURLString),e.avoid_ng_level>=1&&(t=this.makeRedirectURL(t)),t}getDate(e){let t=e;return t.getFullYear()+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}replaceNGWord(t){return 0===e.avoid_ng_level||e.ngword.forEach((e=>{let i=/(https?:\/\/[^\s]*)/;t=t.split(i).map((t=>i.test(t)?t:t.replace(e.before,e.after))).join("")})),t}replaceText(e,t){return t.reduce(((e,t)=>e.replace(t,this.fixedEncodeURIComponent(t.source,!0))),e)}fixedEncodeURIComponent(e,t){let i=t?/[a-zA-Z!'()*.-_]/g:/[!'()*.-]/g;return encodeURIComponent(e).replace(i,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}makeRedirectURL(t,i){if(i){let e=new URL(t);return"https://ohayua.cyou/?ssl="+("https:"===e.protocol?"1":"0")+"&d="+e.host.replace(".","_")+"&p="+encodeURIComponent(e.pathname).replace(/^\//,"")}{let i=this.fixedEncodeURIComponent(t);return i=e.ngdomain.reduce(((e,t)=>{let i=e.match(t);if(i){return this.makeRedirectURL(e.replace(t,this.fixedEncodeURIComponent(i,!0)))}return e}),i),"https://www.google.co.jp/url?q="+i}}removeNGQueryParam(t){let i=new URL(t),r=i.searchParams;return Array.from(r.keys()).forEach((t=>{e.ngQueryParam.some((e=>e.test(t)))&&r.delete(t)})),i.toString()}avoidLinkURLNG(t){return t=this.removeNGQueryParam(t),0===e.avoid_ng_level||(t=this.replaceText(t,e.replaceURLString)).match(/https?:\/\/(?:.*?youtu\.be\/|.*?youtube\.com\/)/)?t:(e.ngurl.forEach((e=>{let i=t.match(e);i&&i.forEach((e=>{t=t.replace(e,this.makeRedirectURL(e))}))})),e.avoid_ng_level<=1?t:e.avoid_ng_level>=2?this.makeRedirectURL(t):void 0)}avoidImageURLNG(t){if(0===e.avoid_ng_level)return t;if(t=this.replaceText(t,e.replaceURLString),e.avoid_ng_level<2)return t;if(2===e.avoid_ng_level)return t.replace(/http/g,"tp");if(3===e.avoid_ng_level){let e=new URL(t);return"https://"+e.hostname.replace(/\./g,"-")+".cdn.ampproject.org/i/"+("https:"===e.protocol?"s/":"")+e.hostname+e.pathname}}avoidVideoURLNG(t){return e.avoid_ng_level>0&&(t=this.replaceText(t,e.replaceURLString)),t.match(/.*\.mp4/)&&e.avoid_ng_level>=2?t.replace(/http/g,"tp"):t.match(/(\/channel\/)|(\/playlist)/)?t:t=(t=t.replace(/https?:\/\/(?:.*?youtu\.be|.*?youtube\.com)(?:\/(?:watch|live|shorts))?\/?(?:watch\?v=)?([A-Za-z\-\_0-9%]+)(?:[\?\&\#][^t][\=\-\w\.]*)*(?:[\?\&\#]t=)([\dhms]+)(?:[\?\&\#][\w\=\-\.]*)*/g,"https://ohayua.cyou/?yt=$1&t=$2 https://i.ytimg.com/vi/$1/hqdefault.jpg")).replace(/https?:\/\/(?:.*?youtu\.be|.*?youtube\.com)(?:\/(?:watch|live|shorts))?\/?(?:watch\?v=)?([A-Za-z\-\_0-9%]+)(?:[\?\&\#][\w\=\-\.]*)*/g,"http://y2u.be/$1 https://i.ytimg.com/vi/$1/hqdefault.jpg")}removeEmoji(t){if(!e.removeEmoji)return t;if("string"!=typeof t)return t;let i=t;return i=this.removeSurrogatePair(i),i=this.replaceEmoji(i),i=this.removeBold(i),i=i.replace(this.twitter.emojiRegExp,""),i=i.replace(e.emojiRegExpSub,""),i=this.removeKaomoji(i),i}static r3(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,Array.from)(e)}static r1(e){return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm," ").length}removeSurrogatePair(t){return e.removeSurrogate.reduce(((e,t)=>e.replace(new RegExp(String.fromCodePoint(t),"g"),"")),t)}removeBold(t){return e.unicodeOffset.reduce(((e,t)=>e.replace(t[0],(e=>String.fromCodePoint(e.codePointAt()-t[1])))),t)}replaceEmoji(t){return e.replaceEmoji.reduce(((e,t)=>e.replace(t.before,t.after)),t)}removeKaomoji(e){let t="[^0-9A-Za-z!-@\\[-`{-}~ぁ-ヶ・-ヾ、-〃々-〕一-龠！-～\\nー…｡-ﾟ￠-￥▽△○□◎【】∀∂∃∇∈∋∑－√∝∞∟∠∥∧-∬∮∴∵∽≒≠≡≦≧≪≫⊂⊃⊆⊇⊥⊿～〜Α-ΡΣ-Ωα-ρσ-ωА-яё\\´°±¨×÷─-┃┌┏┐┓└┗┘┛├┝┠┣-┥┨┫┬┯┰┳┴┸┻┼┿╂╋←-↓⇒⇔ 　-〕〝〟]",i="(?:"+t+"|[ovっつ゜ニノ三二\\\\/])*",r=e.match(new RegExp(i+"[\\(∩꒰（₍].*?[\\)∩꒱）₎]+"+i,"g")),a=e;return r&&r.forEach((e=>{new RegExp(t).test(e)&&(a=a.replace(e,""))})),a}static gettextrange(e,t,r){var a=(0,i.r1)(e);if(e.length-a>0){var u=[].concat((0,i.r3)(e)),s=0===t?"":u.slice(0,t).join(""),o=u.slice(t,r).join("");return[s.length,s.length+o.length]}return[t,r]}}class r{constructor(){this.domain=window.location.hostname,this.promises=[],this.isMobile=/^mobile/.test(window.location.hostname),this.twid=r.getToken("twid"),this.mainurl=r.getScriptURL("/main"),this.vendorurl=r.getScriptURL("vendor"),""!==this.mainiurl&&""!==this.vendorurl||(this.oldstyle=!0,this.mainurl=r.getScriptURL("/init.ja"),this.vendorurl=r.getScriptURL("/init.ja")),this.tweetid=r.getTweetId(),this.csfrtoken=r.getToken("ct0"),this.guesttoken=r.getToken("gt")}static getScriptURL(e){let t=new RegExp(e+"\\.\\w*\\.js"),i=Array.from(document.querySelectorAll("script")).filter((e=>e.src.match(t)))[0];return i?i.src:""}static getTweetId(e=location){let t=e.pathname.match(/\/[^\/]+\/status\/(\d+)/);if(t)return t[1]}static getToken(e){let t=document.cookie.match(new RegExp(e+"=([^;]*);?"));if(t)return t[1]}static getModuleParameter(e,t,i){try{const r=window.webpackChunk_twitter_responsive_web.filter((t=>Array.isArray(t)&&Array.isArray(t[0])&&"string"==typeof t[0][0]&&t[0][0].startsWith(e)));for(const e of r){const r=e[1],a=Object.keys(r).find((e=>r[e]&&r[e].toString().match(t)));if(a){const e=r[a].toString().match(i);if(e&&e[1])return e[1]}}return""}catch(e){return console.error(e),""}}getData(){this.authtoken=r.getModuleParameter("main","Bearer A",/[" ](Bearer AAAAAA[^"]+)"/);let e=r.getModuleParameter("modules.audio",/AudioSpaceById/,/queryId:"([^\"]+)"/);e&&(this.audioSpaceQueryId=e);let t=r.getModuleParameter("vendor","ud83d",/\/(\(\?:\\ud83d[^\/]+)\/g/);return this.emojiRegExp=new RegExp(t||"","g"),this.getTweets()}getTweets(){let e="https://"+this.domain+"/i/api/graphql/-Ls3CrSQNo2fRKH6i6Na1A/TweetDetail?variables="+encodeURIComponent('{"focalTweetId":"')+this.tweetid+encodeURIComponent('","cursor":"","referrer":"tweet","with_rux_injections":false,"includePromotedContent":true,"withCommunity":true,"withQuickPromoteEligibilityTweetFields":true,"withBirdwatchNotes":true,"withVoice":true,"withV2Timeline":true}')+"&features="+encodeURIComponent('{"rweb_lists_timeline_redesign_enabled":true,"responsive_web_graphql_exclude_directive_enabled":true,"verified_phone_label_enabled":false,"creator_subscriptions_tweet_preview_api_enabled":true,"responsive_web_graphql_timeline_navigation_enabled":true,"responsive_web_graphql_skip_user_profile_image_extensions_enabled":false,"tweetypie_unmention_optimization_enabled":true,"responsive_web_edit_tweet_api_enabled":true,"graphql_is_translatable_rweb_tweet_is_translatable_enabled":true,"view_counts_everywhere_api_enabled":true,"longform_notetweets_consumption_enabled":true,"responsive_web_twitter_article_tweet_consumption_enabled":false,"tweet_awards_web_tipping_enabled":false,"freedom_of_speech_not_reach_fetch_enabled":true,"standardized_nudges_misinfo":true,"tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled":true,"longform_notetweets_rich_text_read_enabled":true,"longform_notetweets_inline_media_enabled":true,"responsive_web_media_download_video_enabled":false,"responsive_web_enhance_cards_enabled":false}')+"&fieldToggles="+encodeURIComponent('{"withAuxiliaryUserLabels":false,"withArticleRichContentState":false}'),r={authorization:this.authtoken,"x-csrf-token":this.csfrtoken,"x-twitter-active-user":"yes","x-twitter-client-language":"ja"};this.twid?r["x-twitter-auth-type"]="OAuth2Session":r["x-guest-token"]=this.guesttoken,fetch(e,{mode:"cors",credentials:"include",headers:r}).then((e=>e.json())).then((e=>{if(t=new i(e,this.tweetid,this),!(this.promises.length>0)){let e=t.toString();return navigator.clipboard.writeText(e),this.stopLoading(),e}Promise.all(this.promises).then((e=>{let i=t.toString();return navigator.clipboard.writeText(i),this.stopLoading(),i}))}))}startLoading(){let e=document.createElement("style");e.id="loading-circle-animation-style",e.media="screen",e.type="text/css";let t=[".loading-circle-animation{","height: 20%;","width: 20%;","animation-timing-function: linear;","animation-name: rotate-circle;","animation-iteration-count: infinite;","animation-duration: 0.75s;","position: fixed;","left: 40%;","top: 40%;","}"].join(" "),i="@keyframes rotate-circle{"+["0% {transform: rotate(0deg)}","100% {transform: rotate(360deg)}"].join(" ")+"}",r=document.createTextNode([t,i].join("\n"));e.appendChild(r),document.getElementsByTagName("head")[0].appendChild(e);let a=document.createElement("div");a.classList.add("loading-circle-animation");let u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("height","100%"),u.setAttribute("width","100%"),u.setAttribute("viewBox","0 0 32 32");let s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.setAttribute("cx","16"),s.setAttribute("cy","16"),s.setAttribute("fill","none"),s.setAttribute("r","14"),s.setAttribute("stroke-width","4"),s.style="stroke: rgb(29, 161, 242); opacity: 0.2;";let o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("cx","16"),o.setAttribute("cy","16"),o.setAttribute("fill","none"),o.setAttribute("r","14"),o.setAttribute("stroke-width","4"),o.style="stroke: rgb(29, 161, 242); stroke-dasharray: 80; stroke-dashoffset: 60;",u.appendChild(s),u.appendChild(o),a.appendChild(u),document.querySelector("#react-root").appendChild(a)}stopLoading(){document.querySelector(".loading-circle-animation").remove(),document.querySelector("#loading-circle-animation-style").remove()}}console.log("version:3.09a"),t=new r(!0),t.startLoading(),t.getData()}();