javascript:window.TWITTER_COPY_USER_CONFIG={trimBlankLine:128,removeEmoji:false};!function(){!function(){'use strict';var e={};e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})};var t={};var r,n,i;e.r(t),e.d(t,{TwitterCopyBookmarklet:function(){return TwitterCopyBookmarklet},bootstrapBookmarklet:function(){return I}});var a='undefined'!=typeof window&&null!==(r=window.TWITTER_COPY_USER_CONFIG)&&void 0!==r?r:{};var o=[0,1,2,3];var u=function(e,t){return'number'==typeof e&&o.includes(e)?e:t};var s={level:u(a.avoidNgLevel,0),removeEmoji:null!==(n=a.removeEmoji)&&void 0!==n&&n,trimBlankLine:null!==(i=a.trimBlankLine)&&void 0!==i?i:128,ngUrls:[new RegExp('(https?:\\/\\/note\\.mu\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*amazon\\.co[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*amazon\\.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/seed\\.online\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*hatenablog\\.com\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/bit\\.ly\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/pr5\\.work\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/ow\\.ly\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/buff\\.ly\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.+\\.shop\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/ur0\\.link\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/goo\\.gl\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/discord\\.gg\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/t\\.co\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/lineblog\\.me\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/db\\.tt\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*getuploader\\.com\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*r10\\.to\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/mjk\\.ac\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/kisu\\.me\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/j55\\.pw\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/j\\.mp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/www\\d?\\.to\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/ux\\.nu\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/urx\\d?\\.nu\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/p\\.tl\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/amba\\.to\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/amzn\\.to\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/appsto\\.re\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/dlvr\\.it\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/kuku\\.lu\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/linkclub\\.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*sakura.ne.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*wixsite.com\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/kakuyomu\\.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*syosetu\\.com\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*stores\\.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*shop-pro\\.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*webmoney\\.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*\\.live\\.nicovideo\\.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*linkco\\.re\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*lin\\.ee\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*onl\\.tw\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*onl\\.la\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*onl\\.bz\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*onl\\.sc\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*tinyurl\\.com\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*openrec\\.tv\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*cloudfront\\.net\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*fc2\\.com\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/is\\.gd\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*\\/\\?id=\\d+[^\\s]*)','g'),new RegExp('(https?:\\/\\/yt\\.be\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*twitch\\.tv\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*campaign[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*tiktok\\.com\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*nicovideo\\.jp\\/?[^\\s]*)','g'),new RegExp('(https?:\\/\\/.*discord\\.com\\/?[^\\s]*)','g')],ngWords:[{before:new RegExp('\u62e1\u6563\u5e0c\u671b','g'),after:'\u62e1/\u6563/\u5e0c/\u671b'},{before:new RegExp('\u62e1\u6563\u304a\u9858\u3044','g'),after:'\u62e1/\u6563/\u304a/\u9858/\u3044'},{before:new RegExp('(https?:\\/\\/marshmallow-qa\\.com\\/?[^?]+)\\?[^\\s]+','g'),after:'$1'},{before:new RegExp('(utm_)(source|medium|term|campaign|content)','g'),after:'$1.$2'},{before:new RegExp('\u9234\u539f','g'),after:'\u9234.\u539f'},{before:new RegExp('\u7121\u6599','g'),after:'\u7121.\u6599'},{before:new RegExp('\\.{3}','g'),after:'\u2026'},{before:new RegExp('(_ ?){2,}','g'),after:'_'},{before:new RegExp('(- ?){2,}','g'),after:'-'},{before:new RegExp('(= ?){2,}','g'),after:'='},{before:new RegExp('(; ?){3,}','g'),after:';;'},{before:new RegExp('(: ?){3,}','g'),after:'::'},{before:new RegExp('&lt;','g'),after:'<'},{before:new RegExp('&gt;','g'),after:'>'},{before:new RegExp('&amp;','g'),after:'&'},{before:new RegExp('&quot;','g'),after:'"'},{before:new RegExp(' +','g'),after:' '},{before:new RegExp('\\u3000+','g'),after:'\u3000'},{before:new RegExp('(\\d{2,})(\u5186)','g'),after:'$1.$2'},{before:new RegExp('\u767b\u9332','g'),after:'\u767b.\u9332'},{before:new RegExp('(\u304f.{1,2}[\u307d\u30dd])([\u3093\u30f3])','g'),after:'$1.$2'},{before:new RegExp('\u30ad\u30e3\u30f3\u30da\u30fc\u30f3','g'),after:'\u30ad\u30e3\u30f3.\u30da\u30fc\u30f3'},{before:new RegExp('\u30b3\u30fc\u30c9','g'),after:'\u30b3\u30fc.\u30c9'},{before:new RegExp('K5','g'),after:'K.5'},{before:new RegExp('\u5e38\u95c7','g'),after:'\u3068\u3053\u3084\u307f'},{before:new RegExp('tokoyami','g'),after:'toko.yami'}],ngQueryParams:[new RegExp('utm_(source|medium|term|campaign|content)')],ngDomains:['amazon','amzn',new RegExp('\\.{3}'),new RegExp('_{4,}'),new RegExp('-{4,}')],replaceEmoji:[{before:new RegExp('\\u{203c}','ug'),after:'!!'},{before:new RegExp('\\u{2049}','ug'),after:'!?'},{before:new RegExp('\\u{1f195}','ug'),after:'[NEW]'},{before:new RegExp('\\u{1f202}','ug'),after:'\u30b5'},{before:new RegExp('\\u{1f522}','ug'),after:'1234'},{before:new RegExp('\\u{1f197}','ug'),after:'[OK]'},{before:new RegExp('\\u{1f196}','ug'),after:'[NG]'},{before:new RegExp('\\u{1f193}','ug'),after:'[FREE]'},{before:new RegExp('\\u{1f192}','ug'),after:'[COOL]'},{before:new RegExp('\\u{1f199}','ug'),after:'[UP!]'},{before:new RegExp('\\u{1f201}','ug'),after:'\uff7a\uff7a'},{before:new RegExp('\\u{1f233}','ug'),after:'\u7a7a'},{before:new RegExp('\\u{1f17f}','ug'),after:'\uff30'},{before:new RegExp('\\u{1f251}','ug'),after:'\u53ef'},{before:new RegExp('\\u{1f250}','ug'),after:'\u5f97'},{before:new RegExp('\\u{3299}','ug'),after:'\u79d8'},{before:new RegExp('\\u{3297}','ug'),after:'\u795d'},{before:new RegExp('\\u{1f234}','ug'),after:'\u5408'},{before:new RegExp('\\u{1f235}','ug'),after:'\u6e80'},{before:new RegExp('\\u{1f239}','ug'),after:'\u5272'},{before:new RegExp('\\u{1f232}','ug'),after:'\u7981'},{before:new RegExp('\\u{1f170}','ug'),after:'A'},{before:new RegExp('\\u{1f171}','ug'),after:'B'},{before:new RegExp('\\u{1f18e}','ug'),after:'AB'},{before:new RegExp('\\u{1f191}','ug'),after:'CL'},{before:new RegExp('\\u{1f17e}','ug'),after:'O'},{before:new RegExp('\\u{1f198}','ug'),after:'[SOS]'},{before:new RegExp('\\u{2b55}','ug'),after:'\u25cb'},{before:new RegExp('\\u{274c}','ug'),after:'\xd7'},{before:new RegExp('\\u{2757}','ug'),after:'!'},{before:new RegExp('\\u{2755}','ug'),after:'!'},{before:new RegExp('\\u{2753}','ug'),after:'?'},{before:new RegExp('\\u{2754}','ug'),after:'?'},{before:new RegExp('\\u{26a0}','ug'),after:'!'},{before:new RegExp('\\u{1f22f}','ug'),after:'\u6307'},{before:new RegExp('\\u{1f19a}','ug'),after:'VS'},{before:new RegExp('\\u{1f194}','ug'),after:'ID'},{before:new RegExp('\\u{1f51f}','ug'),after:'10'},{before:new RegExp('\\u{1f236}','ug'),after:'\u6709'},{before:new RegExp('\\u{1f21a}','ug'),after:'\u7121'},{before:new RegExp('\\u{1f238}','ug'),after:'\u7533'},{before:new RegExp('\\u{1f23a}','ug'),after:'\u55b6'},{before:new RegExp('\\u{1f237}','ug'),after:'\u6708'},{before:new RegExp('\\u{a9}','ug'),after:'(C)'},{before:new RegExp('\\u{ae}','ug'),after:'(R)'},{before:new RegExp('\\u{2122}','ug'),after:'(TM)'},{before:new RegExp('[\\u{25b6}\\u{25B7}]','ug'),after:'>'},{before:new RegExp('[\\u{25C0}\\u{25C1}]','ug'),after:'<'},{before:new RegExp('[\\u{2798}-\\u{27af}\\u{27B1}-\\u{27BE}\\u{21E8}]','ug'),after:'\u2192'},{before:new RegExp('[\\u{2B05}\\u{2B30}-\\u{2B42}\\u{21E6}]','ug'),after:'\u2190'},{before:new RegExp('[\\u{2B06}\\u{21E7}]','ug'),after:'\u2191'},{before:new RegExp('[\\u{2B07}\\u{21E9}]','ug'),after:'\u2193'},{before:new RegExp('[\\u{1f53c}\\u{1F53A}]','ug'),after:'\u25b2'},{before:new RegExp('[\\u{1F53B}\\u{1F53D}]','ug'),after:'\u25bc'},{before:new RegExp('\\u{2139}','ug'),after:'i'},{before:new RegExp('[\\u{1F3B5}\\u{1F3B6}\\u{2669}]','ug'),after:'\u266a'},{before:new RegExp('\\u{2795}','ug'),after:'\uff0b'},{before:new RegExp('\\u{2796}','ug'),after:'\uff0d'},{before:new RegExp('\\u{2797}','ug'),after:'\xf7'},{before:new RegExp('\\u{2716}','ug'),after:'\xd7'},{before:new RegExp('\\u{1F4B2}','ug'),after:'$'},{before:new RegExp('\\u{146D}','ug'),after:'P'},{before:new RegExp('\\u{157C}','ug'),after:'H'},{before:new RegExp('\\u{1587}','ug'),after:'R'},{before:new RegExp('\\u{15E9}','ug'),after:'A'},{before:new RegExp('\\u{15EA}','ug'),after:'D'},{before:new RegExp('\\u{15F0}','ug'),after:'M'},{before:new RegExp('\\u{15F7}','ug'),after:'B'},{before:new RegExp('\\u{2022}','ug'),after:'\u30fb'},{before:new RegExp('\\u{301C}','ug'),after:'\uff5e'},{before:new RegExp('\\u{2751}','ug'),after:'\u25a1'},{before:new RegExp('\\u{795C}','ug'),after:'\u793a\u53e4'}],unicodeOffset:[[new RegExp('[\\u{2776}-\\u{277F}]','ug'),10053],[new RegExp('\\u{24FF}','ug'),9423],[new RegExp('[\\u{24EB}-\\u{24F4}]','ug'),129],[new RegExp('[\\u{1f150}-\\u{1f169}]','ug'),127247],[new RegExp('[\\u{24B6}-\\u{24CF}]','ug'),9333],[new RegExp('[\\u{24D0}-\\u{24E9}]','ug'),9327],[new RegExp('[\\u{1d400}-\\u{1d419}]','ug'),119743],[new RegExp('[\\u{1d41a}-\\u{1d433}]','ug'),119737],[new RegExp('[\\u{1d7ce}-\\u{1d7d7}]','ug'),120734],[new RegExp('[\\u{1d56c}-\\u{1d585}]','ug'),120107],[new RegExp('[\\u{1d586}-\\u{1d59f}]','ug'),120101],[new RegExp('[\\u{1d468}-\\u{1d481}]','ug'),119847],[new RegExp('[\\u{1d482}-\\u{1d49b}]','ug'),119841],[new RegExp('[\\u{1d4d0}-\\u{1d4e9}]','ug'),119951],[new RegExp('[\\u{1d4ea}-\\u{1d503}]','ug'),119945],[new RegExp('[\\u{2124}]','ug'),8394],[new RegExp('[\\u{1d552}-\\u{1d56b}]','ug'),120049],[new RegExp('[\\u{1d7d8}-\\u{1d7e1}]','ug'),120744],[new RegExp('[\\u{1d670}-\\u{1d689}]','ug'),120367],[new RegExp('[\\u{1d68a}-\\u{1d6a3}]','ug'),120361],[new RegExp('[\\u{1d7f6}-\\u{1d7ff}]','ug'),120774],[new RegExp('[\\u{1d5a0}-\\u{1d5b9}]','ug'),120159],[new RegExp('[\\u{1d5ba}-\\u{1d5d3}]','ug'),120153],[new RegExp('[\\u{1d7e2}-\\u{1d7eb}]','ug'),120754],[new RegExp('[\\u{1d5d4}-\\u{1d5ed}]','ug'),120211],[new RegExp('[\\u{1d5ee}-\\u{1d607}]','ug'),120205],[new RegExp('[\\u{1d7ec}-\\u{1d7f5}]','ug'),120764],[new RegExp('[\\u{1d63c}-\\u{1d655}]','ug'),120315],[new RegExp('[\\u{1d656}-\\u{1d66f}]','ug'),120309],[new RegExp('[\\u{1d608}-\\u{1d621}]','ug'),120263],[new RegExp('[\\u{1d622}-\\u{1d63b}]','ug'),120257],[new RegExp('[\\u{249c}-\\u{24b5}]','ug'),9275],[new RegExp('[\\u{2474}-\\u{247c}]','ug'),9283],[new RegExp('[\\u{1f1e6}-\\u{1f1ff}]','ug'),127397],[new RegExp('[\\u{1f130}-\\u{1f149}]','ug'),127215],[new RegExp('[\\u{1f170}-\\u{1f189}]','ug'),127279],[new RegExp('[\\u{1d538}-\\u{1d550}]','ug'),120055],[new RegExp('[\\u{2102}]','ug'),8383],[new RegExp('[\\u{210d}]','ug'),8389],[new RegExp('[\\u{2115}]','ug'),8391],[new RegExp('[\\u{2119}-\\u{211a}]','ug'),8393],[new RegExp('[\\u{211d}]','ug'),8395],[new RegExp('[\\u{2124}]','ug'),8394],[new RegExp('[\\u{1d434}-\\u{1d44d}]','ug'),119795],[new RegExp('[\\u{1d44e}-\\u{1d467}]','ug'),119789],[new RegExp('[\\u{1d49c}-\\u{1d4b5}]','ug'),119899],[new RegExp('[\\u{1d4b6}-\\u{1d4cf}]','ug'),119893],[new RegExp('[\\u{1d504}-\\u{1d51c}]','ug'),120003],[new RegExp('[\\u{1d51e}-\\u{1d537}]','ug'),119997]]};var c=new RegExp('(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|[\\u3004\\u3016-\\u301C\\u301E\\u3020-\\u303F]|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|[\\u0081-\\u009F\\u00A1-\\u00A4\\u00A6\\u00A9-\\u00AF\\u00B2\\u00B3\\u00B5\\u00B7-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF]|[\\u2000-\\u200F\\u2011-\\u2014\\u2016\\u2017\\u201A\\u201B\\u201E\\u201F\\u2022-\\u2024\\u2027-\\u202F\\u2031\\u2034-\\u203A\\u203C\\u203D\\u203F-\\u206F]|[\\u2070-\\u20CF]|[\\u2201\\u2204-\\u2206\\u2209\\u220A\\u220C-\\u2210\\u2213-\\u2219\\u221B\\u221C\\u2221-\\u2224\\u2226\\u222D\\u222F-\\u2233\\u2236-\\u223C\\u223E-\\u2251\\u2253-\\u225F\\u2262-\\u2265\\u2268\\u2269\\u226C-\\u2281\\u2284\\u2285\\u2288-\\u22A4\\u22A6-\\u22BE\\u22C0-\\u22FF]|[\\u2440-\\u245F]|[\\u2474-\\u24FF]|[\\u2504-\\u250B\\u250D\\u250E\\u2511\\u2512\\u2515\\u2516\\u2519\\u251A\\u251E\\u251F\\u2521\\u2522\\u2526\\u2527\\u2529\\u252A\\u252D\\u252E\\u2531\\u2532\\u2535\\u2536\\u2539\\u253A\\u253D\\u253E\\u2540\\u2541\\u2543-\\u254A\\u254C-\\u257F]|[\\u25A2-\\u25B1\\u25B4-\\u25BB\\u25BE-\\u25C5\\u25C8-\\u25CA\\u25CC\\u25CD\\u25D0-\\u25EE\\u25F0-\\u25FF]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u2604\\u2607-\\u263F\\u2641\\u2643-\\u2669\\u266B-\\u266C\\u266E\\u2670-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2194-\\u21D1\\u21D3\\u21D5-\\u21FF]|[\\u2FF0-\\u2FFF]|[\\uA640-\\uA69F]|[\\u0100-\\u0390]|[\\u03CA-\\u0400]|[\\u0452-\\u1FFF]|[\\uFE70-\\uFEFF]|[\\uA000-\\uE3FF]|[\\uFB00-\\uFEFF])','g');var l=[65039,8419];function d(e,t){var r='undefined'!=typeof Symbol&&e[Symbol.iterator]||e['@@iterator'];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if('string'==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return'Object'===r&&e.constructor&&(r=e.constructor.name),'Map'===r||'Set'===r?Array.from(e):'Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))||t&&e&&'number'==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=function(){function e(){}return e.extractTokensFromCookies=function(){var e={};var t=this.getTokenFromCookie('ct0');var r=this.getTokenFromCookie('gt');var n=this.getTokenFromCookie('twid');return t&&(e.csrfToken=t),r&&(e.guestToken=r),n&&(e.twitterId=n),e},e.extractBearerToken=function(){try{return this.getModuleParameter('main','Bearer A',new RegExp('[" ](Bearer AAAAAA[^"]+)"'))}catch(e){return console.error('Bearer token extraction failed:',e),''}},e.extractEmojiRegexp=function(){try{var e=new RegExp('\\/(\\(\\?:\\\\ud83d[^/]+)\\/g');var t=this.getModuleParameter('vendor','ud83d',e);return new RegExp(t||'','g')}catch(e){return console.error('Emoji regexp extraction failed:',e),new RegExp('(?:)','g')}},e.extractTweetId=function(e){void 0===e&&(e=location);var t=e.pathname.match(new RegExp('status\\/(\\d+)'));return(null==t?void 0:t[1])||null},e.getScriptURL=function(e){var t=new RegExp(e+'\\.[\\w-]*\\.js');var r=Array.from(document.querySelectorAll('script'));var n=r.find(function(e){return t.test(e.src)});return(null==n?void 0:n.src)||''},e.getTokenFromCookie=function(e){var t=document.cookie.match(new RegExp(e+'=([^;]*);?'));return null==t?void 0:t[1]},e.getModuleParameter=function(e,t,r){try{var n=window.webpackChunk_twitter_responsive_web;var i=(null!=n?n:[]).filter(function(t){if(!Array.isArray(t)||t.length<2)return!1;var r=t[0],n=t[1];if(!Array.isArray(r)||'object'!=typeof n||null===n)return!1;var i=r.filter(function(e){return'string'==typeof e});return i.some(function(t){return t.startsWith(e)})});for(var a,o=d(i);!(a=o()).done;){var u=a.value,s=u[1];var c=Object.entries(s);var l=c.find(function(e){var r=e[1];var n=String(null!=r?r:'');return t instanceof RegExp?t.test(n):n.includes(t)});if(l){var p=l[1];var f=String(null!=p?p:'').match(r);if(null==f?void 0:f[1])return f[1]}}return''}catch(e){return console.error('Module parameter extraction failed:',e),''}},e.extractAudioSpaceQueryId=function(){return this.getModuleParameter('modules.audio',new RegExp('AudioSpaceById'),new RegExp('queryId:"([^"]+)"'))},e}();function g(){var e,t,r='function'==typeof Symbol?Symbol:{},n=r.iterator||'@@iterator',i=r.toStringTag||'@@toStringTag';function a(r,n,i,a){var s=n&&n.prototype instanceof u?n:u,c=Object.create(s.prototype);return v(c,'_invoke',function(r,n,i){var a,u,s,c=0,l=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return a=t,u=0,s=e,p.n=r,o}};function f(r,n){for(u=r,s=n,t=0;!d&&c&&!i&&t<l.length;t++){var i,a=l[t],f=p.p,g=a[2];r>3?(i=g===n)&&(s=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=r<2&&f<a[1])?(u=0,p.v=n,p.n=a[1]):f<g&&(i=r<3||a[0]>n||n>g)&&(a[4]=r,a[5]=n,p.n=g,u=0))}if(i||r>1)return o;throw d=!0,n}return function(i,l,g){if(c>1)throw TypeError('Generator is already running');for(d&&1===l&&f(l,g),u=l,s=g;(t=u<2?e:s)||!d;){a||(u?u<3?(u>1&&(p.n=-1),f(u,s)):p.n=s:p.v=s);try{if(c=2,a){if(u||(i='next'),t=a[i]){if(!(t=t.call(a,s)))throw TypeError('iterator result is not an object');if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(s=TypeError('The iterator does not provide a \''+i+'\' method'),u=1);a=e}else if((t=(d=p.n<0)?s:r.call(n,p))!==o)break}catch(t){a=e,u=1,s=t}finally{c=1}}return{value:t,done:d}}}(r,i,a),!0),c}var o={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(v(t={},n,function(){return this}),t),d=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,v(e,i,'GeneratorFunction')),e.prototype=Object.create(d),e}return s.prototype=c,v(d,'constructor',c),v(c,'constructor',s),s.displayName='GeneratorFunction',v(c,i,'GeneratorFunction'),v(d),v(d,i,'Generator'),v(d,n,function(){return this}),v(d,'toString',function(){return'[object Generator]'}),(g=function(){return{w:a,m:p}})()}function v(e,t,r,n){var i=Object.defineProperty;try{i({},'',{})}catch(e){i=0}v=function(e,t,r,n){function a(t,r){v(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a('next',0),a('throw',1),a('return',2))},v(e,t,r,n)}function h(e,t,r,n,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function w(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){h(a,n,i,o,u,'next',e)}function u(e){h(a,n,i,o,u,'throw',e)}o(void 0)})}}var _=function(){function e(e,t){void 0===t&&(t=window.location.hostname),this.tokens=e,this.domain=t}var t=e.prototype;return t.fetchTweetDetail=function(){var e=w(g().m(function e(t){var r;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isAuthenticated()){e.n=4;break}return e.p=1,e.n=2,this.fetchAuthenticatedTweetDetail(t);case 2:return e.a(2,e.v);case 3:if(e.p=3,r=e.v,console.warn('Authenticated TweetDetail request failed; attempting guest fallback.',r),this.canUseGuestMode()){e.n=4;break}throw r;case 4:return e.a(2,this.fetchGuestTweetDetail(t))}},e,this,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),t.isAuthenticated=function(){return Boolean(this.tokens.csrfToken)},t.canUseGuestMode=function(){return Boolean(this.tokens.bearerToken)},t.fetchAuthenticatedTweetDetail=function(){var e=w(g().m(function e(t){var r,n,i,a,o;return g().w(function(e){for(;;)switch(e.n){case 0:return r={focalTweetId:t,cursor:'',referrer:'tweet',with_rux_injections:!1,includePromotedContent:!0,withCommunity:!0,withQuickPromoteEligibilityTweetFields:!0,withBirdwatchNotes:!0,withVoice:!0,withV2Timeline:!0},n={rweb_lists_timeline_redesign_enabled:!0,responsive_web_graphql_exclude_directive_enabled:!0,verified_phone_label_enabled:!1,creator_subscriptions_tweet_preview_api_enabled:!0,responsive_web_graphql_timeline_navigation_enabled:!0,responsive_web_graphql_skip_user_profile_image_extensions_enabled:!1,tweetypie_unmention_optimization_enabled:!0,responsive_web_edit_tweet_api_enabled:!0,graphql_is_translatable_rweb_tweet_is_translatable_enabled:!0,view_counts_everywhere_api_enabled:!0,longform_notetweets_consumption_enabled:!0,responsive_web_twitter_article_tweet_consumption_enabled:!1,tweet_awards_web_tipping_enabled:!1,freedom_of_speech_not_reach_fetch_enabled:!0,standardized_nudges_misinfo:!0,tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled:!0,longform_notetweets_rich_text_read_enabled:!0,longform_notetweets_inline_media_enabled:!0,responsive_web_media_download_video_enabled:!1,responsive_web_enhance_cards_enabled:!1},i={withAuxiliaryUserLabels:!1,withArticleRichContentState:!1},a='https://'+this.domain+'/i/api/graphql/-Ls3CrSQNo2fRKH6i6Na1A/TweetDetail?variables='+encodeURIComponent(JSON.stringify(r))+'&features='+encodeURIComponent(JSON.stringify(n))+'&fieldToggles='+encodeURIComponent(JSON.stringify(i)),e.n=1,this.makeRequest(a);case 1:return o=e.v,e.a(2,o.json())}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchGuestTweetDetail=function(){var e=w(g().m(function e(t){var r,n,i,a,o,u,s;return g().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.ensureGuestToken();case 1:if(r=e.v,r){e.n=2;break}throw new Error('Guest token acquisition failed');case 2:return n={tweetId:t,withCommunity:!1,includePromotedContent:!1,withVoice:!1},i={creator_subscriptions_tweet_preview_api_enabled:!0,premium_content_api_read_enabled:!1,communities_web_enable_tweet_community_results_fetch:!0,c9s_tweet_anatomy_moderator_badge_enabled:!0,responsive_web_grok_analyze_button_fetch_trends_enabled:!1,responsive_web_grok_analyze_post_followups_enabled:!1,responsive_web_jetfuel_frame:!0,responsive_web_grok_share_attachment_enabled:!0,articles_preview_enabled:!0,responsive_web_edit_tweet_api_enabled:!0,graphql_is_translatable_rweb_tweet_is_translatable_enabled:!0,view_counts_everywhere_api_enabled:!0,longform_notetweets_consumption_enabled:!0,responsive_web_twitter_article_tweet_consumption_enabled:!0,tweet_awards_web_tipping_enabled:!1,responsive_web_grok_show_grok_translated_post:!1,responsive_web_grok_analysis_button_from_backend:!1,creator_subscriptions_quote_tweet_preview_enabled:!1,freedom_of_speech_not_reach_fetch_enabled:!0,standardized_nudges_misinfo:!0,tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled:!0,longform_notetweets_rich_text_read_enabled:!0,longform_notetweets_inline_media_enabled:!0,payments_enabled:!1,profile_label_improvements_pcf_label_in_post_enabled:!0,rweb_tipjar_consumption_enabled:!0,verified_phone_label_enabled:!1,responsive_web_grok_image_annotation_enabled:!0,responsive_web_grok_imagine_annotation_enabled:!0,responsive_web_grok_community_note_auto_translation_is_enabled:!1,responsive_web_graphql_skip_user_profile_image_extensions_enabled:!1,responsive_web_graphql_timeline_navigation_enabled:!0,responsive_web_enhance_cards_enabled:!1},a={withArticleRichContentState:!0,withArticlePlainText:!1,withGrokAnalyze:!1,withDisallowedReplyControls:!1},o=this.getGuestGraphqlBaseUrl(),u=o+'/wqi5M7wZ7tW-X9S2t-Mqcg/TweetResultByRestId?variables='+encodeURIComponent(JSON.stringify(n))+'&features='+encodeURIComponent(JSON.stringify(i))+'&fieldToggles='+encodeURIComponent(JSON.stringify(a)),e.n=3,this.makeRequest(u,{},!0,{forceGuest:!0});case 3:return s=e.v,e.a(2,s.json())}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.ensureGuestToken=function(){var e=w(g().m(function e(){var t;return g().w(function(e){for(;;)switch(e.n){case 0:if(!this.tokens.guestToken){e.n=1;break}return e.a(2,this.tokens.guestToken);case 1:return e.n=2,this.activateGuestSession();case 2:return t=e.v,this.tokens.guestToken=t,e.a(2,t)}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.activateGuestSession=function(){var e=w(g().m(function e(){var t,r,n;return g().w(function(e){for(;;)switch(e.n){case 0:return t=this.getGuestActivationUrl(),e.n=1,this.makeRequest(t,{method:'POST',body:'{}'},!1);case 1:return r=e.v,e.n=2,r.json();case 2:if(n=e.v,n.guest_token){e.n=3;break}throw new Error('Guest token missing in activation response');case 3:return e.a(2,n.guest_token)}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getGuestGraphqlBaseUrl=function(){return'https://api.x.com/graphql'},t.getGuestActivationUrl=function(){return'https://api.x.com/1.1/guest/activate.json'},t.getBaseDomain=function(){var e=this.domain.split('.');return e.length<=2?this.domain:e.slice(-2).join('.')},t.fetchAudioSpace=function(){var e=w(g().m(function e(t,r){var n,i,a,o,u,s,c;return g().w(function(e){for(;;)switch(e.n){case 0:if(!this.isAuthenticated()){e.n=1;break}c=void 0,e.n=3;break;case 1:return e.n=2,this.ensureGuestToken();case 2:c=e.v;case 3:return n=c,this.isAuthenticated()||n||console.warn('Guest token not available for AudioSpace request'),i={id:t,isMetatagsQuery:!1,withReplays:!0,withListeners:!0},a={spaces_2022_h2_spaces_communities:!0,spaces_2022_h2_clipping:!0,creator_subscriptions_tweet_preview_api_enabled:!0,payments_enabled:!1,rweb_xchat_enabled:!0,profile_label_improvements_pcf_label_in_post_enabled:!0,rweb_tipjar_consumption_enabled:!0,verified_phone_label_enabled:!1,premium_content_api_read_enabled:!1,communities_web_enable_tweet_community_results_fetch:!0,c9s_tweet_anatomy_moderator_badge_enabled:!0,responsive_web_grok_analyze_button_fetch_trends_enabled:!1,responsive_web_grok_analyze_post_followups_enabled:!0,responsive_web_jetfuel_frame:!0,responsive_web_grok_share_attachment_enabled:!0,articles_preview_enabled:!0,responsive_web_graphql_skip_user_profile_image_extensions_enabled:!1,responsive_web_edit_tweet_api_enabled:!0,graphql_is_translatable_rweb_tweet_is_translatable_enabled:!0,view_counts_everywhere_api_enabled:!0,longform_notetweets_consumption_enabled:!0,responsive_web_twitter_article_tweet_consumption_enabled:!0,tweet_awards_web_tipping_enabled:!1,responsive_web_grok_show_grok_translated_post:!1,responsive_web_grok_analysis_button_from_backend:!1,creator_subscriptions_quote_tweet_preview_enabled:!1,freedom_of_speech_not_reach_fetch_enabled:!0,standardized_nudges_misinfo:!0,tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled:!0,longform_notetweets_rich_text_read_enabled:!0,longform_notetweets_inline_media_enabled:!0,responsive_web_grok_image_annotation_enabled:!0,responsive_web_grok_imagine_annotation_enabled:!0,responsive_web_graphql_timeline_navigation_enabled:!0,responsive_web_grok_community_note_auto_translation_is_enabled:!1,responsive_web_enhance_cards_enabled:!1},o=this.isAuthenticated()?'https://x.com/i/api/graphql':this.getGuestGraphqlBaseUrl(),u=o+'/'+r+'/AudioSpaceById?variables='+encodeURIComponent(JSON.stringify(i))+'&features='+encodeURIComponent(JSON.stringify(a)),e.n=4,this.makeRequest(u);case 4:return s=e.v,e.a(2,s.json())}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),t.fetchVmapData=function(){var e=w(g().m(function e(t){var r,n,i,a,o,u,s,c,l,d;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch(t);case 1:return r=e.v,e.n=2,r.text();case 2:if(n=e.v,i=new DOMParser,a=i.parseFromString(n,'text/xml'),o=Array.from(a.getElementsByTagName('tw:videoVariant')).filter(function(e){return'video/mp4'===e.getAttribute('content_type')}),0!==o.length){e.n=3;break}return e.a(2,[]);case 3:return u=o.map(function(e){return parseInt(e.getAttribute('bit_rate')||'0')}).sort(function(e,t){return e-t}),s=u[0],c=o.find(function(e){return parseInt(e.getAttribute('bit_rate')||'0')===s}),l=null==c?void 0:c.getAttribute('url'),e.a(2,l?[decodeURIComponent(l)]:[]);case 4:return e.p=4,d=e.v,console.error('VMAP data fetch failed:',d),e.a(2,[])}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),t.makeRequest=function(){var e=w(g().m(function e(t,r,n,i){var a,o,u,s,c,l,d,p,f,v,h;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return void 0===r&&(r={}),void 0===n&&(n=!0),void 0===i&&(i={}),a=new URL(t),o=this.normalizeHeaders(r.headers),u=Object.assign({accept:'*/*','accept-language':this.resolveAcceptLanguage(),'content-type':'application/json','x-twitter-active-user':'yes','x-twitter-client-language':this.resolveClientLanguage()},o),s=Boolean(i.forceGuest),this.tokens.bearerToken&&(u.authorization=this.tokens.bearerToken),this.tokens.csrfToken&&(u['x-csrf-token']=this.tokens.csrfToken),s?this.tokens.guestToken&&(u['x-guest-token']=this.tokens.guestToken):this.tokens.twitterId?u['x-twitter-auth-type']='OAuth2Session':this.tokens.guestToken&&(u['x-guest-token']=this.tokens.guestToken),(s||!this.isAuthenticated())&&this.tokens.guestToken&&this.isSameSiteRequest(a)&&(u['x-client-transaction-id']=u['x-client-transaction-id']||this.generateClientTransactionId(),u['x-xp-forwarded-for']=u['x-xp-forwarded-for']||this.generateForwardedForToken()),c=Object.assign({},r,{headers:u,mode:'cors',credentials:'include'}),e.n=1,fetch(t,c);case 1:if(l=e.v,l){e.n=2;break}throw new Error('Network error');case 2:if(l.ok){e.n=6;break}if(f=n&&!this.isAuthenticated(),!f){e.n=4;break}return e.n=3,this.refreshGuestToken();case 3:f=e.v;case 4:if(!f){e.n=5;break}return e.a(2,this.makeRequest(t,Object.assign({},r,{headers:o}),!1,i));case 5:throw new Error('API request failed: '+l.status+' '+l.statusText);case 6:if(!n||this.isAuthenticated()||!this.isJsonResponse(l)){e.n=13;break}return e.p=7,d=l.clone(),e.n=8,d.json();case 8:if(p=e.v,v=this.containsInvalidGuestTokenError(p),!v){e.n=10;break}return e.n=9,this.refreshGuestToken();case 9:v=e.v;case 10:if(!v){e.n=11;break}return e.a(2,this.makeRequest(t,Object.assign({},r,{headers:o}),!1,i));case 11:e.n=13;break;case 12:e.p=12,h=e.v,console.debug('Guest token validation failed:',h);case 13:return e.a(2,l)}},e,this,[[7,12]])}));return function(t,r,n,i){return e.apply(this,arguments)}}(),t.resolveAcceptLanguage=function(){return Array.isArray(navigator.languages)&&navigator.languages.length>0?navigator.languages.map(function(e,t){return 0===t?e:e+';q='+Math.max(0,Math.min(1,1-.1*t)).toFixed(1)}).join(','):navigator.language||'en-US'},t.resolveClientLanguage=function(){return Array.isArray(navigator.languages)&&navigator.languages.length>0?navigator.languages[0]:navigator.language||'en'},t.isSameSiteRequest=function(e){var t=this.getBaseDomain();return e.hostname===this.domain||e.hostname.endsWith('.'+t)},t.generateClientTransactionId=function(){var e=this.getRandomBytes(32);return this.encodeBase64(e)},t.generateForwardedForToken=function(){var e=this.getRandomBytes(64);return Array.from(e,function(e){return e.toString(16).padStart(2,'0')}).join('')},t.getRandomBytes=function(e){var t='undefined'!=typeof globalThis?globalThis:{};var r=t.crypto;if(r&&'function'==typeof r.getRandomValues){var n=new Uint8Array(e);return r.getRandomValues(n),n}var i=new Uint8Array(e);for(var a=0;a<e;a++)i[a]=Math.floor(256*Math.random());return i},t.encodeBase64=function(e){var t=Array.from(e,function(e){return String.fromCharCode(e)}).join('');if('undefined'!=typeof window&&'function'==typeof window.btoa)return window.btoa(t).replace(new RegExp('=+$'),'');var r='undefined'!=typeof globalThis?globalThis.btoa:void 0;return'function'==typeof r?r(t).replace(new RegExp('=+$'),''):Array.from(e,function(e){return e.toString(16).padStart(2,'0')}).join('')},t.refreshGuestToken=function(){var e=w(g().m(function e(){var t,r;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isAuthenticated()){e.n=1;break}return e.a(2,!1);case 1:return e.p=1,this.tokens.guestToken=void 0,e.n=2,this.activateGuestSession();case 2:return t=e.v,this.tokens.guestToken=t,e.a(2,!0);case 3:return e.p=3,r=e.v,console.error('Guest token refresh failed:',r),e.a(2,!1)}},e,this,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),t.isJsonResponse=function(e){var t=e.headers.get('content-type')||'';return t.toLowerCase().includes('application/json')},t.containsInvalidGuestTokenError=function(e){if(!e||'object'!=typeof e)return!1;var t=e.errors;return!!Array.isArray(t)&&t.some(function(e){if(!e||'object'!=typeof e)return!1;var t='code'in e?Number(e.code):void 0;var r='message'in e?String(e.message||''):'';return 239===t||r.toLowerCase().includes('bad guest token')})},t.normalizeHeaders=function(e){if(!e)return{};if(e instanceof Headers){var t={};return e.forEach(function(e,r){t[r]=e}),t}return Array.isArray(e)?e.reduce(function(e,t){var r=t[0],n=t[1];return e[r]=n,e},{}):Object.assign({},e)},e}();function m(e,t){var r='undefined'!=typeof Symbol&&e[Symbol.iterator]||e['@@iterator'];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if('string'==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return'Object'===r&&e.constructor&&(r=e.constructor.name),'Map'===r||'Set'===r?Array.from(e):'Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e))||t&&e&&'number'==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var x=function(){function e(e){this.settings=e.ngSettings}var t=e.prototype;return t.processLinkUrl=function(e){var t=e;return t=this.removeNGQueryParams(t),0===this.settings.level?t:(t=this.replaceUrlString(t),this.isYouTubeUrl(t)?t:(t=this.processNGUrls(t),this.settings.level>=2?this.makeRedirectUrl(t):t))},t.processImageUrl=function(e){if(0===this.settings.level)return e;var t=this.replaceUrlString(e);return this.settings.level<2?t:2===this.settings.level?t.replace(new RegExp('http','g'),'ttp'):3===this.settings.level?this.makeAmpProjectUrl(t):t},t.processCardImageUrl=function(e){var t=e.match(new RegExp('card_img\\/(\\d+)\\/([^?]*).*format=(\\w+)'));if(t){var r=t[1],n=t[2],i=t[3];return'https://ohayua.cyou/card_img/'+r+'/'+n+'.'+i}return e},t.processVideoUrl=function(e){var t=e;return this.settings.level>0&&(t=this.replaceUrlString(t)),t.match(new RegExp('.*\\.mp4'))&&this.settings.level>=2&&(t=t.replace(new RegExp('http','g'),'ttp')),t.match(new RegExp('(\\/channel\\/)|(\\/playlist)'))||(t=this.shortenYouTubeUrl(t)),t},t.createTweetUrl=function(e,t){var r='https://x.com/'+e+'/status/'+t;return r=this.replaceUrlString(r),this.settings.level>=1&&(r=this.makeRedirectUrl(r)),r},t.removeNGQueryParams=function(e){var t=this;try{var r=new URL(e);var n=r.searchParams;return Array.from(n.keys()).forEach(function(e){t.settings.ngQueryParams.some(function(t){return t.test(e)})&&n.delete(e)}),r.toString()}catch(t){return e}},t.replaceUrlString=function(e){var t=this;var r=[new RegExp('K5','g'),new RegExp('tokoyami','g')];return r.reduce(function(e,r){var n=e.match(r);return n?e.replace(r,t.fixedEncodeURIComponent(n[0],!0)):e},e)},t.processNGUrls=function(e){var t=this;var r=e;return this.settings.ngUrls.forEach(function(e){var n=r.match(e);n&&n.forEach(function(e){r=r.replace(e,t.makeRedirectUrl(e))})}),r},t.makeRedirectUrl=function(e,t){if(void 0===t&&(t=!1),!t){var r=this.fixedEncodeURIComponent(e);var n=r;for(var i,a=m(this.settings.ngDomains);!(i=a()).done;){var o=i.value;if('string'==typeof o){var u=new RegExp(o,'g');var s=n.match(u);if(s){var c=this.fixedEncodeURIComponent(s[0],!0);n=this.makeRedirectUrl(n.replace(u,c))}}else{var l=n.match(o);if(l){var d=this.fixedEncodeURIComponent(l[0],!0);n=this.makeRedirectUrl(n.replace(o,d))}}}return'https://www.google.co.jp/url?q='+n}try{var p=new URL(e);var f='https:'===p.protocol?'1':'0';var g=p.host.replace(new RegExp('\\.','g'),'_');var v=encodeURIComponent(p.pathname).replace(new RegExp('^\\/'),'');return'https://ohayua.cyou/?ssl='+f+'&d='+g+'&p='+v}catch(t){return e}},t.makeAmpProjectUrl=function(e){try{var t=new URL(e);var r='https:'===t.protocol?'s/':'';var n=t.hostname.replace(new RegExp('\\.','g'),'-');return'https://'+n+'.cdn.ampproject.org/i/'+r+t.hostname+t.pathname}catch(t){return e}},t.shortenYouTubeUrl=function(e){var t=e;return t=t.replace(new RegExp('https?:\\/\\/(?:.*?youtu\\.be|.*?youtube\\.com)(?:\\/(?:watch|live|shorts))?\\/?(?:watch\\?v=)?([A-Za-z0-9_%-]+)(?:[?&#][^t][=\\w.-]*)*(?:[?&#]t=)([\\dhms]+)(?:[?&#][\\w=.-]*)*','g'),function(e,t,r){return'https://ohayua.cyou/?yt='+t+'&t='+r+' https://i.ytimg.com/vi/'+t+'/hqdefault.jpg'}),t=t.replace(new RegExp('https?:\\/\\/(?:.*?youtu\\.be|.*?youtube\\.com)(?:\\/(?:watch|live|shorts))?\\/?(?:watch\\?v=)?([A-Za-z0-9_%-]+)(?:[?&#][\\w=.-]*)*','g'),function(e,t){return'http://y2u.be/'+t+' https://i.ytimg.com/vi/'+t+'/hqdefault.jpg'}),t},t.isYouTubeUrl=function(e){return new RegExp('https?:\\/\\/(?:.*?youtu\\.be\\/|.*?youtube\\.com\\/)').test(e)},t.fixedEncodeURIComponent=function(e,t){void 0===t&&(t=!1);var r=t?new RegExp('[a-zA-Z!\'()*._-]','g'):new RegExp('[!\'()*._-]','g');return encodeURIComponent(e).replace(r,function(e){return'%'+e.charCodeAt(0).toString(16).toUpperCase()})},e}();var E=function(){function e(e){this.settings=e.ngSettings}var t=e.prototype;return t.replaceNGWords=function(e){if('string'!=typeof e)return'';var t=this.decodeHtmlEntities(e);if(0===this.settings.level)return t;var r=new RegExp('(https?:\\/\\/[^\\s]*)');return this.settings.ngWords.forEach(function(e){t=t.split(r).map(function(t){return r.test(t)?t:t.replace(e.before,e.after)}).join('')}),t},t.processEmoji=function(e,t){if(!this.settings.removeEmoji)return e;if('string'!=typeof e)return e;var r=e;return r=this.removeSurrogatePairs(r),r=this.replaceEmoji(r),r=this.normalizeBoldText(r),t&&(r=r.replace(t,'')),r=r.replace(c,''),r=this.removeKaomoji(r),r},t.trimBlankLines=function(e){if('string'!=typeof e)return'';var t=e.split('\n').length;return t>this.settings.trimBlankLine?e.replace(new RegExp('^\\s*\\n','gm'),''):e},t.processText=function(e,t){if('string'!=typeof e)return'';var r=e;return r=this.processEmoji(r,t),r=this.replaceNGWords(r),r=this.trimBlankLines(r),r},t.removeEmoji=function(e,t){return this.processEmoji(e,t)},t.decodeHtmlEntities=function(e){return'string'!=typeof e?'':e.replace(new RegExp('&lt;','g'),'<').replace(new RegExp('&gt;','g'),'>').replace(new RegExp('&amp;','g'),'&').replace(new RegExp('&quot;','g'),'"')},t.removeSurrogatePairs=function(e){return l.reduce(function(e,t){return e.replace(new RegExp(String.fromCodePoint(t),'g'),'')},e)},t.replaceEmoji=function(e){return this.settings.replaceEmoji.reduce(function(e,t){return e.replace(t.before,t.after)},e)},t.normalizeBoldText=function(e){return this.settings.unicodeOffset.reduce(function(e,t){var r=t[0],n=t[1];return e.replace(r,function(e){return String.fromCodePoint((e.codePointAt(0)||0)-n)})},e)},t.removeKaomoji=function(e){var t='[^0-9A-Za-z!-@\\[-`{-}~\u3041-\u30f6\u30fb-\u30fe\u3001-\u3003\u3005-\u3015\u4e00-\u9fa0\uff01-\uff5e\\n\u30fc\u2026\uff61-\uff9f\uffe0-\uffe5\u25bd\u25b3\u25cb\u25a1\u25ce\u3010\u3011\u2200\u2202\u2203\u2207\u2208\u220b\u2211\uff0d\u221a\u221d\u221e\u221f\u2220\u2225\u2227-\u222c\u222e\u2234\u2235\u223d\u2252\u2260\u2261\u2266\u2267\u226a\u226b\u2282\u2283\u2286\u2287\u22a5\u22bf\uff5e\u301c\u0391-\u03a1\u03a3-\u03a9\u03b1-\u03c1\u03c3-\u03c9\u0410-\u044f\u0451\\\xb4\xb0\xb1\xa8\xd7\xf7\u2500-\u2503\u250c\u250f\u2510\u2513\u2514\u2517\u2518\u251b\u251c\u251d\u2520\u2523-\u2525\u2528\u252b\u252c\u252f\u2530\u2533\u2534\u2538\u253b\u253c\u253f\u2542\u254b\u2190-\u2193\u21d2\u21d4 \u3000-\u3015\u301d\u301f]';var r='(?:'+t+'|[ov\u3063\u3064\u309c\u30cb\u30ce\u4e09\u4e8c\\\\/])*';var n=new RegExp(r+'[\\(\u2229\ua4b0\uff08\u208d].*?[\\)\u2229\ua4b1\uff09\u208e]+'+r,'g');var i=new RegExp(t);var a=e.match(n);if(!a)return e;var o=e;return a.forEach(function(e){i.test(e)&&(o=o.replace(e,''))}),o},e}();function y(e,t){var r='undefined'!=typeof Symbol&&e[Symbol.iterator]||e['@@iterator'];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if('string'==typeof e)return R(e,t);var r={}.toString.call(e).slice(8,-1);return'Object'===r&&e.constructor&&(r=e.constructor.name),'Map'===r||'Set'===r?Array.from(e):'Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e))||t&&e&&'number'==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(){function e(){}return e.parseTweet=function(e,t,r,n){var i,a,o,u,c,l,d,p,f,g;void 0===r&&(r=!1);var v=null===(i=e.data.threaded_conversation_with_injections_v2)||void 0===i?void 0:i.instructions;var h=null!==(a=this.getTweetEntry(v,t))&&void 0!==a?a:this.createTweetEntryFromResult(e,t);if(!h)throw new Error('Tweet entry not found for ID: '+t);var w=this.extractTweetResult(h,r);var _=w.legacy;var m=w.core.user_results.result;var b=null===(o=w.card)||void 0===o?void 0:o.legacy;var E=null===(l=null===(c=null===(u=w.note_tweet)||void 0===u?void 0:u.note_tweet_results)||void 0===c?void 0:c.result)||void 0===l?void 0:l.text;var y={id:_.id_str,text:this.extractTweetText(_,E),createdAt:new Date(_.created_at),author:this.parseUser(m),conversationPolicy:this.parseConversationPolicy(_.conversation_control)};if(null===(d=_.extended_entities)||void 0===d?void 0:d.media){var R=this.parseExtendedMedia(_.extended_entities.media),k=R.media,A=R.videoUrls,T=R.additionalMedia;y.media=k,y.videoUrls=A,y.additionalMedia=T,_.extended_entities.media.forEach(function(e){'string'==typeof e.url&&(y.text=y.text.replace(e.url,''))})}if(b&&this.isPollCard(b)&&(y.poll=this.parsePoll(b)),b&&this.isAudioSpaceCard(b)&&(y.audioSpace=this.parseAudioSpaceFromCard(b)),b&&this.isUnifiedCard(b)){var S=this.parseUnifiedCard(b),j=S.media,C=S.videoUrls,U=S.additionalMedia;j.length>0&&(y.media=(y.media||[]).concat(j)),C.length>0&&(y.videoUrls=(y.videoUrls||[]).concat(C)),U&&(y.additionalMedia=U)}if(b&&!this.isPollCard(b)&&!this.isAudioSpaceCard(b)&&!this.isUnifiedCard(b)){this.processCardTitle(y,b);var F=this.extractCardImageUrl(b);if(F){var P=new x({ngSettings:s,isMobile:!1,domain:'x.com'});var I=P.processCardImageUrl(F);y.media||(y.media=[]),y.media.push({type:'photo',url:I})}}if((_.in_reply_to_screen_name||(null===(p=_.entities)||void 0===p?void 0:p.user_mentions))&&(y.replyTo=this.parseReplyTargets(_)),_.quoted_status_permalink&&!r)try{y.quotedTweet=this.parseTweet(e,t,!0,n)}catch(e){console.warn('Failed to parse quoted tweet:',e)}return this.processUrlEntities(y,_,null===(g=null===(f=w.note_tweet)||void 0===f?void 0:f.note_tweet_results)||void 0===g?void 0:g.result,n),y},e.parseAudioSpace=function(e){var t,r;var n=e.data.audioSpace;var i=this.toRecordArray(null===(t=n.participants)||void 0===t?void 0:t.admins);var a=this.toRecordArray(null===(r=n.participants)||void 0===r?void 0:r.speakers);return{id:'',title:n.metadata.title,state:n.metadata.state,startedAt:n.metadata.started_at?new Date(n.metadata.started_at):void 0,scheduledStart:n.metadata.scheduled_start?new Date(n.metadata.scheduled_start):void 0,updatedAt:n.metadata.updated_at?new Date(n.metadata.updated_at):void 0,isRecording:n.metadata.is_space_available_for_replay,admins:this.mapParticipants(i),speakers:this.mapParticipants(a)}},e.createTweetEntryFromResult=function(e,t){var r;var n=this.asRecord(e.data);var i=null!==(r=this.asRecord(null==n?void 0:n.tweetResult))&&void 0!==r?r:this.asRecord(null==n?void 0:n.tweetResultByRestId);var a=this.asRecord(null==i?void 0:i.result);if(a){var o={itemContent:{tweet_results:{result:a}}};return{entryId:'tweet-'+t,content:o}}},e.getTweetEntry=function(e,t){if(Array.isArray(e))for(var r,n=y(e);!(r=n()).done;){var i=r.value;var a=i;var o=a.type;if('string'==typeof o&&'TimelineAddEntries'===o){var u=Array.isArray(a.entries)?a.entries:[];var s=u.find(function(e){var r=e.entryId;return'string'==typeof r&&r.includes(t)});if(s){var c=s.entryId;if('string'!=typeof c)continue;var l=s.content;var d='object'==typeof l&&null!==l?l:void 0;return{entryId:c,content:d}}}}},e.extractTweetResult=function(e,t){var r,n;var i=e.content;var a=null==i?void 0:i.itemContent;var o=null==a?void 0:a.tweet_results;var u=null==o?void 0:o.result;if(!u)throw new Error('Tweet result payload missing');if(t){var s=u.quoted_status_result;var c=null==s?void 0:s.result;var l=null!==(r=null==c?void 0:c.tweet)&&void 0!==r?r:c;if(!l)throw new Error('Quoted tweet result missing');return this.assertTweetResult(l)}var d=null!==(n=u.tweet)&&void 0!==n?n:u;return this.assertTweetResult(d)},e.extractTweetText=function(e,t){return t||(e.full_text||'')},e.parseUser=function(e){var t,r;var n=null!==(t=e.legacy)&&void 0!==t?t:{};var i=null!==(r=e.core)&&void 0!==r?r:{};var a=n.id_str||e.rest_id||'';var o=n.name||i.name||'';var u=n.screen_name||i.screen_name||'';return a&&o&&u||console.warn('User data missing expected fields.',{id:a,name:o,screenName:u}),{id:a,name:o,screenName:u}},e.parseConversationPolicy=function(e){if(null==e?void 0:e.policy)switch(e.policy){case'community':return'community';case'by_invitation':return'by_invitation';default:return}},e.parseExtendedMedia=function(e){var t=[];var r=[];var n;return e.forEach(function(e){var i,a,o,u,s,c,l,d;if('video'===e.type||'animated_gif'===e.type){var p=(null!==(a=null===(i=e.video_info)||void 0===i?void 0:i.variants)&&void 0!==a?a:[]).filter(function(e){return'video/mp4'===e.content_type}).sort(function(e,t){var r,n;return(null!==(r=t.bitrate)&&void 0!==r?r:0)-(null!==(n=e.bitrate)&&void 0!==n?n:0)});var f=p[0];if(f){var g=f.url.replace(new RegExp('\\?tag=\\w*'),'');var v='string'==typeof e.media_url_https?' '+e.media_url_https:'';r.push(g+v);var h=null===(o=e.additional_media_info)||void 0===o?void 0:o.call_to_actions;if(h){var w=null===(u=h.watch_now)||void 0===u?void 0:u.url;var _=null===(s=h.visit_site)||void 0===s?void 0:s.url;var m='string'==typeof w?w:'string'==typeof _?_:void 0;if(m){var b=null!==(l=null===(c=e.additional_media_info)||void 0===c?void 0:c.title)&&void 0!==l?l:'';var x=null===(d=e.additional_media_info)||void 0===d?void 0:d.description;var E=x&&b?b+' ('+x+')':b||m;n={url:m,title:E}}}}}else'photo'===e.type&&'string'==typeof e.media_url_https&&t.push({type:e.type,url:e.media_url_https,altText:e.ext_alt_text})}),{media:t,videoUrls:r,additionalMedia:n}},e.isPollCard=function(e){return'string'==typeof e.name&&new RegExp('poll\\d+choice_text_only').test(e.name)},e.parsePoll=function(e){var t,r,n,i,a,o,u,s;var c=null!==(t=e.binding_values)&&void 0!==t?t:[];var l=function(e){var t=c.find(function(t){return t.key===e});return null==t?void 0:t.value};var d=null!==(r=e.name)&&void 0!==r?r:'';var p=d.match(new RegExp('poll(\\d)choice_text_only'));var f=null==p?void 0:p[1];var g=f?parseInt(f,10):0;var v=[];for(var h=1;h<=g;h++){var w=null===(n=l('choice'+h+'_label'))||void 0===n?void 0:n.string_value;var _=null===(i=l('choice'+h+'_count'))||void 0===i?void 0:i.string_value;w&&_&&v.push({text:w,votes:parseInt(_,10)})}var m=null===(a=l('end_datetime_utc'))||void 0===a?void 0:a.string_value;var b=null===(o=l('last_updated_datetime_utc'))||void 0===o?void 0:o.string_value;return{choices:v,endTime:m?new Date(m):void 0,isEnded:null!==(s=null===(u=l('counts_are_final'))||void 0===u?void 0:u.boolean_value)&&void 0!==s&&s,lastUpdated:b?new Date(b):void 0}},e.parseReplyTargets=function(e){var t;var r=[];return e.in_reply_to_screen_name&&r.push('@'+e.in_reply_to_screen_name),(null===(t=e.entities)||void 0===t?void 0:t.user_mentions)&&e.entities.user_mentions.forEach(function(e){var t='@'+e.screen_name;r.includes(t)||r.push(t)}),r},e.processUrlEntities=function(e,t,r,n){var i,a,o,u;var c=n||s;var l=new x({ngSettings:c,isMobile:!1,domain:'x.com'});var d=null!==(a=null===(i=t.entities)||void 0===i?void 0:i.urls)&&void 0!==a?a:[];d.forEach(function(t){if('string'==typeof t.url){var r='string'==typeof t.expanded_url?t.expanded_url:t.url;var n=l.processLinkUrl(r);e.text=e.text.replace(t.url,n)}});var p=null!==(u=null===(o=null==r?void 0:r.entity_set)||void 0===o?void 0:o.urls)&&void 0!==u?u:[];p.forEach(function(t){if('string'==typeof t.url){var r='string'==typeof t.expanded_url?t.expanded_url:t.url;var n=l.processLinkUrl(r);e.text=e.text.replace(t.url,n)}})},e.isAudioSpaceCard=function(e){return'string'==typeof e.name&&e.name.indexOf('audiospace')>=0},e.parseAudioSpaceFromCard=function(e){var t=function(t){var r,n;return null===(n=null===(r=e.binding_values)||void 0===r?void 0:r.find(function(e){return e.key===t}))||void 0===n?void 0:n.value}('id');return t&&t.string_value?{id:t.string_value,state:'NotStarted',isRecording:!1,admins:[],speakers:[]}:{id:'',state:'NotStarted',isRecording:!1,admins:[],speakers:[]}},e.isUnifiedCard=function(e){var t;return(null!==(t=e.binding_values)&&void 0!==t?t:[]).some(function(e){return'unified_card'===e.key})},e.parseUnifiedCard=function(e){var t,r,n,i,a,o;var u=[];var s=[];var c;var l=null!==(t=e.binding_values)&&void 0!==t?t:[];var d=l.find(function(e){return'unified_card'===e.key});var p=null===(r=null==d?void 0:d.value)||void 0===r?void 0:r.string_value;if(!p)return{media:u,videoUrls:s,additionalMedia:c};try{var f=JSON.parse(p);var g=this.asRecord(f.media_entities);if(g)for(var v=0,h=Object.values(g);v<h.length;v++){var w=h[v];if(this.isUnifiedCardMediaEntity(w))if('video'===w.type){var _=(null!==(i=null===(n=w.video_info)||void 0===n?void 0:n.variants)&&void 0!==i?i:[]).filter(function(e){return'video/mp4'===e.content_type}).sort(function(e,t){var r,n;return(null!==(r=t.bitrate)&&void 0!==r?r:0)-(null!==(n=e.bitrate)&&void 0!==n?n:0)});var m=_[0];if(m){var b=m.url.replace(new RegExp('\\?tag=\\w*'),'');var x='string'==typeof w.media_url_https?' '+w.media_url_https:'';s.push(b+x)}}else'photo'===w.type&&'string'==typeof w.media_url_https&&u.push({type:'photo',url:w.media_url_https,altText:w.ext_alt_text})}var E=this.asRecord(f.destination_objects);if(E)for(var y=0,R=Object.values(E);y<R.length;y++){var k=R[y];if(this.isUnifiedCardDestination(k)){var A=null===(o=null===(a=k.data)||void 0===a?void 0:a.url_data)||void 0===o?void 0:o.url;if('string'==typeof A){c={url:A,title:''};break}}}}catch(e){console.warn('Failed to parse unified_card:',e)}return{media:u,videoUrls:s,additionalMedia:c}},e.processCardTitle=function(e,t){var r;var n=function(e){var r,n;return null===(n=null===(r=t.binding_values)||void 0===r?void 0:r.find(function(t){return t.key===e}))||void 0===n?void 0:n.value};var i=n('title');var a=n('card_url');if((null==i?void 0:i.string_value)&&(null==a?void 0:a.string_value)){var o=new E({ngSettings:s,isMobile:!1,domain:'x.com'});var u=o.removeEmoji(i.string_value);var c=u.split(new RegExp('( ?- ?)|( ?\uff5c ?)|( ?\\| ?)|( ?: ?)|( ?\u2502 ?)'));var l=null!==(r=c[0])&&void 0!==r?r:'';var d=e.text.includes(u);var p=''!==l&&c.length>=2&&e.text.includes(l);if(!d&&!p){var f=a.string_value;e.text=e.text.replace(f,u+'\n'+f)}}},e.extractCardImageUrl=function(e){var t,r;if(e.binding_values)for(var n,i=y(e.binding_values);!(n=i()).done;){var a=n.value;if(('photo_image_full_size_original'===a.key||'thumbnail_image_original'===a.key||'player_image_original'===a.key)&&(null===(r=null===(t=a.value)||void 0===t?void 0:t.image_value)||void 0===r?void 0:r.url))return a.value.image_value.url}},e.assertTweetResult=function(e){return e},e.mapParticipants=function(e){var t=this;return e.map(function(e){var r,n,i;var a=e;var o=null!==(n=null!==(r=t.tryGetString(a,'display_name'))&&void 0!==r?r:t.tryGetString(a,'name'))&&void 0!==n?n:'';var u=null!==(i=t.tryGetString(a,'twitter_screen_name'))&&void 0!==i?i:'';if(o||u)return{displayName:o||u,twitterScreenName:u||o||''}}).filter(function(e){return void 0!==e})},e.tryGetString=function(e,t){var r=e[t];return'string'==typeof r?r:void 0},e.toRecordArray=function(e){return Array.isArray(e)?e.filter(function(e){return'object'==typeof e&&null!==e}):[]},e.asRecord=function(e){if(e&&'object'==typeof e)return e},e.isUnifiedCardMediaEntity=function(e){if(!e||'object'!=typeof e)return!1;var t=e;var r=t.type;return'video'===r||'photo'===r},e.isUnifiedCardDestination=function(e){if(!e||'object'!=typeof e)return!1;var t=e;if('browser'!==t.type)return!1;var r=t.data;return!(!r||'object'!=typeof r)},e}();var A=function(){function e(){}return e.startLoading=function(){this.createStyle(),this.createLoadingElement()},e.stopLoading=function(){this.removeElement('.'+this.LOADING_ID),this.removeElement('#'+this.STYLE_ID)},e.createStyle=function(){var e=document.createElement('style');e.id=this.STYLE_ID,e.media='screen',e.type='text/css';var t=['.'+this.LOADING_ID+' {','height: 20%;','width: 20%;','animation-timing-function: linear;','animation-name: rotate-circle;','animation-iteration-count: infinite;','animation-duration: 0.75s;','position: fixed;','left: 40%;','top: 40%;','}'].join(' ');var r=['@keyframes rotate-circle {','0% { transform: rotate(0deg); }','100% { transform: rotate(360deg); }','}'].join(' ');var n=document.createTextNode([t,r].join('\n'));e.appendChild(n),document.head.appendChild(e)},e.createLoadingElement=function(){var e=document.querySelector('#react-root');if(e){var t=document.createElement('div');t.classList.add(this.LOADING_ID);var r=this.createSvgElement();t.appendChild(r),e.appendChild(t)}else console.warn('React root element not found')},e.createSvgElement=function(){var e=document.createElementNS('http://www.w3.org/2000/svg','svg');e.setAttribute('height','100%'),e.setAttribute('width','100%'),e.setAttribute('viewBox','0 0 32 32');var t=document.createElementNS('http://www.w3.org/2000/svg','circle');t.setAttribute('cx','16'),t.setAttribute('cy','16'),t.setAttribute('fill','none'),t.setAttribute('r','14'),t.setAttribute('stroke-width','4'),t.style.cssText='stroke: rgb(29, 161, 242); opacity: 0.2;';var r=document.createElementNS('http://www.w3.org/2000/svg','circle');return r.setAttribute('cx','16'),r.setAttribute('cy','16'),r.setAttribute('fill','none'),r.setAttribute('r','14'),r.setAttribute('stroke-width','4'),r.style.cssText='stroke: rgb(29, 161, 242); stroke-dasharray: 80; stroke-dashoffset: 60;',e.appendChild(t),e.appendChild(r),e},e.removeElement=function(e){var t=document.querySelector(e);t&&t.remove()},e}();var T,S;function j(e,t){return t||(t=e.slice(0)),e.raw=t,e}function C(){var e,t,r='function'==typeof Symbol?Symbol:{},n=r.iterator||'@@iterator',i=r.toStringTag||'@@toStringTag';function a(r,n,i,a){var s=n&&n.prototype instanceof u?n:u,c=Object.create(s.prototype);return U(c,'_invoke',function(r,n,i){var a,u,s,c=0,l=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return a=t,u=0,s=e,p.n=r,o}};function f(r,n){for(u=r,s=n,t=0;!d&&c&&!i&&t<l.length;t++){var i,a=l[t],f=p.p,g=a[2];r>3?(i=g===n)&&(s=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=r<2&&f<a[1])?(u=0,p.v=n,p.n=a[1]):f<g&&(i=r<3||a[0]>n||n>g)&&(a[4]=r,a[5]=n,p.n=g,u=0))}if(i||r>1)return o;throw d=!0,n}return function(i,l,g){if(c>1)throw TypeError('Generator is already running');for(d&&1===l&&f(l,g),u=l,s=g;(t=u<2?e:s)||!d;){a||(u?u<3?(u>1&&(p.n=-1),f(u,s)):p.n=s:p.v=s);try{if(c=2,a){if(u||(i='next'),t=a[i]){if(!(t=t.call(a,s)))throw TypeError('iterator result is not an object');if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(s=TypeError('The iterator does not provide a \''+i+'\' method'),u=1);a=e}else if((t=(d=p.n<0)?s:r.call(n,p))!==o)break}catch(t){a=e,u=1,s=t}finally{c=1}}return{value:t,done:d}}}(r,i,a),!0),c}var o={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(U(t={},n,function(){return this}),t),d=c.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,U(e,i,'GeneratorFunction')),e.prototype=Object.create(d),e}return s.prototype=c,U(d,'constructor',c),U(c,'constructor',s),s.displayName='GeneratorFunction',U(c,i,'GeneratorFunction'),U(d),U(d,i,'Generator'),U(d,n,function(){return this}),U(d,'toString',function(){return'[object Generator]'}),(C=function(){return{w:a,m:p}})()}function U(e,t,r,n){var i=Object.defineProperty;try{i({},'',{})}catch(e){i=0}U=function(e,t,r,n){function a(t,r){U(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a('next',0),a('throw',1),a('return',2))},U(e,t,r,n)}function F(e,t,r,n,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function P(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){F(a,n,i,o,u,'next',e)}function u(e){F(a,n,i,o,u,'throw',e)}o(void 0)})}}A.LOADING_ID='loading-circle-animation',A.STYLE_ID='loading-circle-animation-style';var TwitterCopyBookmarklet=function(){function TwitterCopyBookmarklet(e){var t;void 0===e&&(e=0),this.version=null!==(t='4.00')?t:'development';var r=function(e){return Object.assign({},s,{level:u(a.avoidNgLevel,e)})}(e);var n=window.location.hostname;var i=new RegExp('^mobile').test(n);this.options={ngSettings:r,isMobile:i,domain:n};var o=f.extractTokensFromCookies();var c=f.extractBearerToken();if(!c)throw new Error('Bearer token not found');this.apiClient=new _(Object.assign({bearerToken:c},o),n),this.textProcessor=new E(this.options),this.urlProcessor=new x(this.options)}var e=TwitterCopyBookmarklet.prototype;return e.copyTweet=function(){var e=P(C().m(function e(){var t,r,n,i,a;return C().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=f.extractTweetId(),t){e.n=1;break}throw new Error('Tweet ID not found in URL');case 1:return e.p=1,console.log('version: '+this.version),e.n=2,this.apiClient.fetchTweetDetail(t);case 2:return r=e.v,n=k.parseTweet(r,t,!1,this.options.ngSettings),e.n=3,this.processAudioSpaces(n);case 3:return i=this.formatTweet(n),console.log(i),e.n=4,navigator.clipboard.writeText(i);case 4:return A.stopLoading(),e.a(2,i);case 5:throw e.p=5,a=e.v,A.stopLoading(),console.error('Failed to copy tweet:',a),a;case 6:return e.a(2)}},e,this,[[1,5]])}));return function(){return e.apply(this,arguments)}}(),e.processAudioSpaces=function(){var e=P(C().m(function e(t){var r=this;var n,i,a;return C().w(function(e){for(;;)switch(e.n){case 0:if(this.containsAudioSpace(t)){e.n=1;break}return e.a(2);case 1:if(n=f.extractAudioSpaceQueryId(),n){e.n=2;break}return e.a(2);case 2:return i=new Map,a=function(){var e=P(C().m(function e(t){var o,u,s,c,l;return C().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:if(u=null===(o=t.audioSpace)||void 0===o?void 0:o.id,!u){e.n=6;break}if(s=i.get(u),s){e.n=5;break}return e.p=2,e.n=3,r.apiClient.fetchAudioSpace(u,n);case 3:c=e.v,s=k.parseAudioSpace(c),s.id=u,i.set(u,s),e.n=5;break;case 4:e.p=4,l=e.v,console.warn('Failed to fetch AudioSpace data for '+u+':',l);case 5:s&&(t.audioSpace=Object.assign({},s));case 6:if(!t.quotedTweet){e.n=7;break}return e.n=7,a(t.quotedTweet);case 7:return e.a(2)}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}(),e.n=3,a(t);case 3:return e.a(2)}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.formatTweet=function(e){var t=this;var r;var n=f.extractEmojiRegexp();var i='';var a=this.textProcessor.processText(e.author.name,n);if(i+=a+' @'+e.author.screenName+' ('+this.formatDate(e.createdAt)+') ',e.conversationPolicy)switch(e.conversationPolicy){case'community':i+='[\u8fd4\u4fe1:\u30d5\u30a9\u30ed\u30fc/@\u306e\u307f]';break;case'by_invitation':i+='[\u8fd4\u4fe1:@\u306e\u307f]'}if(i+='\n',e.replyTo){var o=e.replyTo.filter(function(t){return!e.text.toUpperCase().includes(t.toUpperCase())});o.length>0&&(i+=o.join(' ')+' ')}if(e.text){var u=this.textProcessor.processText(e.text,n);var s=this.urlProcessor.processVideoUrl(u);(null===(r=e.audioSpace)||void 0===r?void 0:r.id)&&(s=this.removeAudioSpaceReferences(s,e.audioSpace.id)),i+=s+'\n'}return e.poll&&(i+=this.formatPoll(e.poll)),e.audioSpace&&(i+=this.formatAudioSpace(e.audioSpace)),e.additionalMedia&&i.indexOf(this.urlProcessor.processVideoUrl(e.additionalMedia.url))<0&&(e.additionalMedia.title&&(i+=e.additionalMedia.title+'\n'),i+=this.urlProcessor.processVideoUrl(e.additionalMedia.url)+'\n'),e.media&&(i+=this.formatMedia(e.media)),e.videoUrls&&e.videoUrls.forEach(function(r){var n=t.urlProcessor.processVideoUrl(r);e.text.indexOf(r)<0&&i.indexOf(n)<0&&(i+=n+'\n')}),i+=this.urlProcessor.createTweetUrl(e.author.screenName,e.id),e.quotedTweet&&(i+='\n\n[\u5f15\u7528\u5143] '+this.formatTweet(e.quotedTweet)),this.textProcessor.trimBlankLines(i)},e.formatDate=function(e){var t=function(e){return e.toString().padStart(2,'0')};return e.getFullYear()+'/'+t(e.getMonth()+1)+'/'+t(e.getDate())+' '+t(e.getHours())+':'+t(e.getMinutes())+':'+t(e.getSeconds())},e.formatTime=function(e){var t=function(e){return e.toString().padStart(2,'0')};return t(e.getHours())+':'+t(e.getMinutes())},e.formatPoll=function(e){var t=e.choices.reduce(function(e,t){return e+t.votes},0);var r='\u3010\u6295\u7968'+(e.isEnded?'\u7d50\u679c':'\u4e2d')+':'+this.getPollTimeRemaining(e);return r+='('+(e.isEnded?'\u8a08':'\u73fe\u5728')+t.toLocaleString()+'\u7968)\u3011\n',e.choices.forEach(function(e,n){var i=t>0?Math.round(e.votes/t*1e3)/10:0;r+='['+(n+1)+'] '+e.text+'('+i+'%)\n'}),r},e.getPollTimeRemaining=function(e){if(e.isEnded)return'';var t=(new Date).getTime();if(!e.endTime)return'';var r=new Date(e.endTime).getTime();var n=Math.trunc((r-t)/1e3);if(n<=0)return'';var i=3600;var a=Math.trunc(n/86400);if(a>0)return'\u6b8b\u308a'+a+'\u65e5';var o=n-86400*a;var u=Math.trunc(o/i);if(u>0)return'\u6b8b\u308a'+u+'\u6642\u9593';var s=o-u*i;var c=Math.trunc(s/60);if(c>0)return'\u6b8b\u308a'+c+'\u5206';var l=s-60*c;return l>0?'\u6b8b\u308a'+l+'\u79d2':''},e.formatAudioSpace=function(e){var t=this;var r,n;var i=['Ended','TimedOut'].includes(e.state);var a=[];if(i)a.push('\u914d\u4fe1\u7d42\u4e86');else{var o=e.startedAt||e.scheduledStart;o&&a.push(this.formatTime(o)+'\u958b\u59cb')}a.push(e.isRecording?'\u9332\u753b\u3042\u308a':'\u9332\u753b\u306a\u3057');var u=[];var s=a.map(function(e){return'['+e+']'}).join('');if(e.title){var c=this.textProcessor.processText(e.title);s+=' '+c}u.push(s);var l=(null!==(r=e.admins)&&void 0!==r?r:[]).map(function(e){var r=t.textProcessor.processText(e.displayName);return r+' @'+e.twitterScreenName});var d=Array.from(new Set(l));d.length>0&&u.push('\u30db\u30b9\u30c8\uff1a'+d.join(', '));var p=(null!==(n=e.speakers)&&void 0!==n?n:[]).map(function(e){var r=t.textProcessor.processText(e.displayName);return r+' @'+e.twitterScreenName});var f=Array.from(new Set(p));return f.length>0&&u.push('\u30b9\u30d4\u30fc\u30ab\u30fc\uff1a'+f.join(', ')),e.id&&u.push('https://x.com/i/spaces/'+e.id),u.join('\n')+'\n'},e.formatMedia=function(e){var t=this;return e.map(function(e){var r=t.urlProcessor.processImageUrl(e.url);var n=e.altText?e.altText+' ':'';return n+r+'\n'}).join('')},e.containsAudioSpace=function(e){var t;return!!e&&(!!(null===(t=e.audioSpace)||void 0===t?void 0:t.id)||!!e.quotedTweet&&this.containsAudioSpace(e.quotedTweet))},e.removeAudioSpaceReferences=function(e,t){var r=[new RegExp(String.raw(T||(T=j(['s*https?://(?:mobile.)?twitter.com/i/spaces/','[^\ns]*'],['\\s*https?://(?:mobile\\.)?twitter\\.com/i/spaces/','[^\\n\\s]*'])),t),'gi'),new RegExp(String.raw(S||(S=j(['s*https?://x.com/i/spaces/','[^\ns]*'],['\\s*https?://x\\.com/i/spaces/','[^\\n\\s]*'])),t),'gi')];var n=e.split('\n').reduce(function(e,t){var n=t;var i=!1;return r.forEach(function(e){var t=n.replace(e,'');t!==n&&(i=!0,n=t)}),n=n.replace(new RegExp('[ \\t]+$','g'),''),i&&''===n.trim()||e.push(n),e},[]);return n.join('\n').trimEnd()},TwitterCopyBookmarklet}();function I(e){A.startLoading();var t=new TwitterCopyBookmarklet(e);var r=t.copyTweet();return r.catch(console.error),r}var O='undefined'!=typeof process&&process.env?'production':void 0;var B='undefined'!=typeof process&&process.env?process.env.TWITTER_COPY_AUTO_RUN:void 0;if('undefined'!=typeof window&&'disabled'!==B&&('test'!==O||'enabled'===B)){I(0)}window.TwitterCopyBookmarklet=t}();}()